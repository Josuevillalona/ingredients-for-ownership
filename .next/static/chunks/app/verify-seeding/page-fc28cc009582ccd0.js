(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[157],{772:function(e,s,t){Promise.resolve().then(t.bind(t,8625))},8625:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var i=t(7437),r=t(2265),a=t(9842),o=t(5419),d=t(3408),n=t(1088);function l(){let[e,s]=(0,r.useState)({foodCategories:0,foods:0,ingredientDocuments:0,loading:!0}),[t,l]=(0,r.useState)({foodCategories:[],foods:[],ingredientDocuments:[]}),[c,m]=(0,r.useState)({success:!1}),[x,g]=(0,r.useState)("database");(0,r.useEffect)(()=>{(async()=>{let e=performance.now();try{var t;console.log("\uD83D\uDD0D Verifying database seeding..."),console.log("\uD83D\uDD25 Firebase Auth state:",(null===o.I||void 0===o.I?void 0:null===(t=o.I.currentUser)||void 0===t?void 0:t.uid)||"Not authenticated"),console.log("\uD83D\uDCC2 Checking food-categories collection...");let i=(0,a.IO)((0,a.hJ)(o.db,"food-categories")),r=await (0,a.PL)(i),d=r.docs.map(e=>({id:e.id,...e.data()}));console.log("✅ Food categories loaded:",r.size),console.log("\uD83E\uDD57 Checking foods collection...");let n=(0,a.IO)((0,a.hJ)(o.db,"foods")),c=await (0,a.PL)(n),m=c.docs.map(e=>({id:e.id,...e.data()}));console.log("✅ Foods loaded:",c.size),console.log("\uD83D\uDCCB Checking ingredient-documents collection...");let x=[],g=0;try{let e=(0,a.IO)((0,a.hJ)(o.db,"ingredient-documents")),s=await (0,a.PL)(e);x=s.docs.map(e=>({id:e.id,...e.data()})),g=s.size,console.log("✅ Ingredient documents loaded:",g)}catch(e){console.warn("⚠️ Could not load ingredient documents (likely auth required):",e)}let h=performance.now(),u=Math.round(h-e),b=d.length>0&&m.length>0;s({foodCategories:r.size,foods:c.size,ingredientDocuments:g,loading:!1,verificationTime:u}),l({foodCategories:d.slice(0,3),foods:m.slice(0,5),ingredientDocuments:x}),console.log("✅ Database verification complete:",{foodCategories:r.size,foods:c.size,ingredientDocuments:g,hasValidData:b,verificationTime:"".concat(u,"ms")})}catch(r){console.error("❌ Database verification failed:",r);let t=performance.now(),i="Unknown error occurred";r instanceof Error&&(i=r.message.includes("permission-denied")||r.message.includes("Missing or insufficient permissions")?"Permission denied - this may be expected for some collections without authentication. Food data should still be accessible.":r.message.includes("unavailable")?"Firestore service unavailable - check network connection":r.message),s({foodCategories:0,foods:0,ingredientDocuments:0,loading:!1,error:i,verificationTime:Math.round(t-e)})}})()},[]);let h=async()=>{let e=performance.now();m({success:!1});try{console.log("\uD83E\uDDEA Testing nutrition API...");let s=null;for(let e of d.$V){let t=e.foods.find(e=>e.fdcId);if(t){s=t;break}}if(!s||!s.fdcId)throw Error("No test food with FDC ID found in database");console.log("\uD83C\uDFAF Testing with food:",s.name,"FDC ID:",s.fdcId);let t=await n.U.getNutritionalInfo(s),i=performance.now();if(!t)throw Error("No nutrition data returned");m({success:!0,responseTime:Math.round(i-e),sampleData:{food:s.name,calories:t.calories,protein:t.protein,carbs:t.carbs,fat:t.fat,fiber:t.fiber}}),console.log("✅ Nutrition API test successful:",t)}catch(t){let s=performance.now();console.error("❌ Nutrition API test failed:",t),m({success:!1,responseTime:Math.round(s-e),error:t instanceof Error?t.message:"Unknown error"})}};if(e.loading)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"Verifying database seeding..."})]})})});let u=e.foodCategories>0&&e.foods>0;return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Development Tools & Verification"}),(0,i.jsx)("button",{onClick:()=>{s(e=>({...e,loading:!0,error:void 0})),l({foodCategories:[],foods:[],ingredientDocuments:[]}),setTimeout(()=>{window.location.reload()},100)},disabled:e.loading,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.loading?"\uD83D\uDD04 Checking...":"\uD83D\uDD04 Refresh"})]}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"database",label:"Database Verification",icon:"\uD83D\uDDC4️"},{id:"nutrition",label:"Nutrition API Test",icon:"\uD83E\uDDEA"},{id:"typescript",label:"TypeScript Database",icon:"\uD83D\uDCDD"}].map(e=>(0,i.jsxs)("button",{onClick:()=>g(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(x===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.icon," ",e.label]},e.id))})})}),"database"===x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"p-6 rounded-lg mb-8 ".concat(u?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"),children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4 ".concat(u?"text-green-800":"text-red-800"),children:u?"✅ Database Successfully Seeded!":"❌ Database Seeding Incomplete"}),e.error&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded",children:(0,i.jsxs)("p",{className:"text-red-700 text-sm",children:["Error: ",e.error]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.foodCategories}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Food Categories"}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"Expected: 5"}),(0,i.jsx)("div",{className:"text-xs mt-1 ".concat(e.foodCategories>=5?"text-green-600":"text-yellow-600"),children:e.foodCategories>=5?"✅ Complete":"⚠️ Partial"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.foods}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Foods"}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"Expected: 20"}),(0,i.jsx)("div",{className:"text-xs mt-1 ".concat(e.foods>=20?"text-green-600":"text-yellow-600"),children:e.foods>=20?"✅ Complete":"⚠️ Partial"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.ingredientDocuments}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Sample Documents"}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"Expected: 2"}),(0,i.jsx)("div",{className:"text-xs mt-1 ".concat(e.ingredientDocuments>=2?"text-green-600":"text-yellow-600"),children:e.ingredientDocuments>=2?"✅ Complete":"⚠️ Partial"})]})]})]}),u&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sample Food Categories"}),(0,i.jsx)("div",{className:"space-y-3",children:t.foodCategories.map(e=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded p-3",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",e.id," | Order: ",e.order]})]},e.id))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sample Foods"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.foods.map(e=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded p-3",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:["Category: ",e.categoryId," | Serving: ",e.servingSize]}),e.fdcId&&(0,i.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["\uD83D\uDCCA FDC ID: ",e.fdcId]}),e.nutritionalHighlights&&(0,i.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["Highlights: ",e.nutritionalHighlights.join(", ")]})]},e.id))})]}),t.ingredientDocuments.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sample Ingredient Documents"}),(0,i.jsx)("div",{className:"space-y-4",children:t.ingredientDocuments.map(e=>{var s;return(0,i.jsxs)("div",{className:"border border-gray-200 rounded p-4",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.title||e.clientName||"Untitled Document"}),(0,i.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description||"No description available"}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Coach ID: ",e.coachId," | Share Token: ",e.shareToken]}),(0,i.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Categories: ",(null===(s=e.categories)||void 0===s?void 0:s.length)||0," | Status: ",e.isActive?"Active":"Inactive"," | ID: ",e.id]})]},e.id)})})]})]}),(0,i.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"What This Means:"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Food Categories"}),": The main categories (Meat & Poultry, Seafood, etc.)"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Foods"}),": Individual food items with nutrition integration"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Sample Documents"}),": Test ingredient documents for development"]}),(0,i.jsx)("li",{children:"• All data includes FDC IDs for nutrition API integration"}),(0,i.jsx)("li",{children:"• Share tokens enable public access to ingredient documents"})]}),e.verificationTime&&(0,i.jsx)("div",{className:"mt-4 pt-4 border-t border-blue-200",children:(0,i.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,i.jsx)("strong",{children:"Performance:"})," Verification completed in ",e.verificationTime,"ms",e.verificationTime<1e3?" ⚡ (Fast)":e.verificationTime<3e3?" ✅ (Good)":" ⚠️ (Slow)"]})})]})]}),"nutrition"===x&&(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"FDC API Integration Test"}),(0,i.jsx)("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83E\uDDEA Test Nutrition API"})]}),c.success?(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:[(0,i.jsx)("h4",{className:"text-green-800 font-medium mb-2",children:"✅ API Test Successful"}),c.sampleData&&(0,i.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Food:"})," ",c.sampleData.food]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Calories:"})," ",c.sampleData.calories]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Protein:"})," ",c.sampleData.protein,"g"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Carbs:"})," ",c.sampleData.carbs,"g"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Fat:"})," ",c.sampleData.fat,"g"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Fiber:"})," ",c.sampleData.fiber,"g"]})]}),c.responseTime&&(0,i.jsxs)("div",{className:"text-xs text-green-600 mt-2",children:["Response time: ",c.responseTime,"ms"]})]}):c.error?(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,i.jsx)("h4",{className:"text-red-800 font-medium mb-2",children:"❌ API Test Failed"}),(0,i.jsx)("div",{className:"text-sm text-red-700",children:c.error}),c.responseTime&&(0,i.jsxs)("div",{className:"text-xs text-red-600 mt-2",children:["Failed after: ",c.responseTime,"ms"]})]}):(0,i.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded p-4",children:(0,i.jsx)("div",{className:"text-gray-600",children:'Click "Test Nutrition API" to verify FDC integration'})})]})}),"typescript"===x&&(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"TypeScript Food Database Stats"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d.WL.totalCategories}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Total Categories"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:d.WL.totalFoods}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Total Foods"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:d.$V.filter(e=>e.foods.some(e=>e.fdcId)).length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Categories with FDC Data"})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Category Breakdown:"}),(0,i.jsx)("div",{className:"space-y-2",children:d.WL.categoriesWithCounts.map(e=>(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-700",children:e.name}),(0,i.jsxs)("span",{className:"text-gray-500",children:[e.count," items"]})]},e.name))})]})]})})]})})}},5419:function(e,s,t){"use strict";t.d(s,{I:function(){return n},db:function(){return d}});var i=t(5236),r=t(9842),a=t(5735);let o=(0,i.ZF)({apiKey:"AIzaSyBQZagyMTpFNsoSOh4cKT8PVV_xbCuiX8s",authDomain:"ingredients-for-ownershi-81eaf.firebaseapp.com",projectId:"ingredients-for-ownershi-81eaf",storageBucket:"ingredients-for-ownershi-81eaf.firebasestorage.app",messagingSenderId:"855662446831",appId:"1:855662446831:web:deff590004f93f5cec731a"}),d=(0,r.ad)(o),n=(0,a.v0)(o)}},function(e){e.O(0,[358,139,990,836,885,971,23,744],function(){return e(e.s=772)}),_N_E=e.O()}]);