(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{146:function(e,r,t){Promise.resolve().then(t.bind(t,295))},6463:function(e,r,t){"use strict";var a=t(1169);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},295:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),n=t(2265),s=t(7516),o=t(6410),d=t(6760),l=t(7138);function i(){return(0,a.jsx)(s.i,{children:(0,a.jsx)(c,{})})}function c(){var e,r,t,s,i;let{user:c,coach:u,refreshCoachProfile:m}=(0,o.a)(),[h,x]=(0,n.useState)(!1),[f,b]=(0,n.useState)({name:(null==u?void 0:u.name)||"",email:(null==u?void 0:u.email)||"",colorCodingStyle:(null==u?void 0:null===(e=u.preferences)||void 0===e?void 0:e.colorCodingStyle)||"standard"}),[p,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(""),j=async e=>{e.preventDefault(),g(!0),y("");try{y("Profile updated successfully!"),x(!1),await m()}catch(e){y("Failed to update profile: "+e.message)}finally{g(!1)}},w=e=>{let{name:r,value:t}=e.target;b(e=>({...e,[r]:t}))};return(0,a.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[(0,a.jsx)("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)(l.default,{href:"/dashboard",className:"text-brand-white/70 hover:text-brand-white",children:"â† Back to Dashboard"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"I"})}),(0,a.jsx)("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Coach Profile"})]})]})})}),(0,a.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl shadow-sm border border-brand-gold/20 p-8",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-3xl",children:(null==u?void 0:null===(r=u.name)||void 0===r?void 0:r.charAt(0).toUpperCase())||"C"})}),(0,a.jsx)("h2",{className:"font-prompt font-bold text-2xl text-brand-dark",children:(null==u?void 0:u.name)||"Coach"}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:(null==u?void 0:u.email)||(null==c?void 0:c.email)})]}),v&&(0,a.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(v.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"),children:(0,a.jsx)("p",{className:"font-prompt text-sm",children:v})}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Full Name"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:f.name,onChange:w,disabled:!h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent font-prompt disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Email Address"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:f.email,disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 font-prompt",placeholder:"Email cannot be changed"}),(0,a.jsx)("p",{className:"text-xs text-brand-dark/60 mt-1 font-prompt",children:"Email address cannot be changed for security reasons"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"colorCodingStyle",className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Color Coding Style"}),(0,a.jsxs)("select",{id:"colorCodingStyle",name:"colorCodingStyle",value:f.colorCodingStyle,onChange:w,disabled:!h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent font-prompt disabled:bg-gray-50 disabled:text-gray-500",children:[(0,a.jsx)("option",{value:"standard",children:"Standard (Blue, Yellow, Red)"}),(0,a.jsx)("option",{value:"colorblind",children:"Colorblind Friendly"}),(0,a.jsx)("option",{value:"high-contrast",children:"High Contrast"})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,a.jsx)("h3",{className:"font-prompt font-semibold text-brand-dark mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-prompt font-medium text-brand-dark/60",children:"Account Created:"}),(0,a.jsx)("p",{className:"font-prompt text-brand-dark",children:(null==u?void 0:null===(i=u.createdAt)||void 0===i?void 0:null===(s=i.toDate)||void 0===s?void 0:null===(t=s.call(i))||void 0===t?void 0:t.toLocaleDateString())||"Unknown"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-prompt font-medium text-brand-dark/60",children:"User ID:"}),(0,a.jsx)("p",{className:"font-prompt text-brand-dark text-xs break-all",children:(null==c?void 0:c.uid)||"Unknown"})]})]})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{type:"submit",variant:"primary",isLoading:p,className:"w-full sm:w-auto",children:p?"Saving...":"Save Changes"}),(0,a.jsx)(d.z,{type:"button",variant:"secondary",onClick:()=>{var e;x(!1),b({name:(null==u?void 0:u.name)||"",email:(null==u?void 0:u.email)||"",colorCodingStyle:(null==u?void 0:null===(e=u.preferences)||void 0===e?void 0:e.colorCodingStyle)||"standard"}),y("")},className:"w-full sm:w-auto",children:"Cancel"})]}):(0,a.jsx)(d.z,{type:"button",variant:"primary",onClick:()=>x(!0),className:"w-full sm:w-auto",children:"Edit Profile"})})]})]})})]})}},7516:function(e,r,t){"use strict";t.d(r,{i:function(){return d}});var a=t(7437),n=t(6410),s=t(6463),o=t(2265);function d(e){let{children:r,redirectTo:t="/login",fallback:d=(0,a.jsx)(l,{})}=e,{user:i,loading:c}=(0,n.a)(),u=(0,s.useRouter)();return((0,o.useEffect)(()=>{c||i||u.push(t)},[i,c,u,t]),c)?d:i?(0,a.jsx)(a.Fragment,{children:r}):null}function l(){return(0,a.jsx)("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-2xl",children:"I"})}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:"Loading..."})]})})}},6410:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return m},a:function(){return u}});var a=t(7437),n=t(2265),s=t(5735),o=t(9842),d=t(5419);class l{async signIn(e,r){try{return(await (0,s.e5)(d.I,e,r)).user}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async createCoach(e,r,t){try{let a=await (0,s.Xb)(d.I,e,r),n={email:e,name:t,createdAt:o.EK.now(),preferences:{colorCodingStyle:"standard"}};await (0,o.pl)((0,o.JU)(d.db,"coaches",a.user.uid),n)}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async signOut(){try{await (0,s.w7)(d.I)}catch(e){throw Error("Failed to sign out. Please try again.")}}async getCoachProfile(e){try{let r=(0,o.JU)(d.db,"coaches",e),t=await (0,o.QT)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){return console.error("Error fetching coach profile:",e),null}}onAuthStateChange(e){return(0,s.Aj)(d.I,e)}getCurrentUser(){return d.I.currentUser}getAuthErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred during authentication. Please try again."}}}let i=new l,c=(0,n.createContext)(void 0);function u(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function m(e){let{children:r}=e,[t,s]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>i.onAuthStateChange(async e=>{if(s(e),e)try{let r=await i.getCoachProfile(e.uid);d(r)}catch(e){console.error("Error fetching coach profile:",e),d(null)}else d(null);u(!1)}),[]);let m=async(e,r)=>{u(!0);try{await i.signIn(e,r)}catch(e){throw u(!1),e}},h=async(e,r,t)=>{u(!0);try{await i.createCoach(e,r,t),await i.signIn(e,r)}catch(e){throw u(!1),e}},x=async()=>{u(!0);try{await i.signOut()}catch(e){throw u(!1),e}},f=async()=>{if(t)try{let e=await i.getCoachProfile(t.uid);d(e)}catch(e){console.error("Error refreshing coach profile:",e)}};return(0,a.jsx)(c.Provider,{value:{user:t,coach:o,loading:l,signIn:m,signUp:h,signOut:x,refreshCoachProfile:f},children:r})}},6760:function(e,r,t){"use strict";t.d(r,{z:function(){return s}});var a=t(7437);t(2265);var n=t(4839);function s(e){let{variant:r="primary",size:t="md",children:s,isLoading:o=!1,disabled:d,className:l,...i}=e;return(0,a.jsx)("button",{className:(0,n.W)("font-prompt font-medium transition-all duration-200 focus:ring-2 focus:ring-brand-focus focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brand-gold text-brand-dark hover:bg-brand-hover disabled:hover:bg-brand-gold",secondary:"bg-brand-dark text-brand-white hover:bg-brand-dark/90",outline:"border-2 border-brand-gold text-brand-gold hover:bg-brand-gold hover:text-brand-dark",ghost:"text-brand-gold hover:bg-brand-gold/10"}[r],{sm:"px-3 py-1.5 text-sm rounded-md min-h-[36px]",md:"px-4 py-2 text-base rounded-lg min-h-[44px] touch-target",lg:"px-6 py-3 text-lg rounded-lg min-h-[52px]"}[t],l),disabled:d||o,...i,children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Loading..."})]}):s})}},5419:function(e,r,t){"use strict";t.d(r,{I:function(){return l},db:function(){return d}});var a=t(5236),n=t(9842),s=t(5735);let o=(0,a.ZF)({apiKey:"AIzaSyBQZagyMTpFNsoSOh4cKT8PVV_xbCuiX8s",authDomain:"ingredients-for-ownershi-81eaf.firebaseapp.com",projectId:"ingredients-for-ownershi-81eaf",storageBucket:"ingredients-for-ownershi-81eaf.firebasestorage.app",messagingSenderId:"855662446831",appId:"1:855662446831:web:deff590004f93f5cec731a"}),d=(0,n.ad)(o),l=(0,s.v0)(o)}},function(e){e.O(0,[358,139,990,836,38,971,23,744],function(){return e(e.s=146)}),_N_E=e.O()}]);