(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1181:function(e,r,t){Promise.resolve().then(t.bind(t,1789))},1789:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(7437),s=t(2265),n=t(7138),d=t(6760),l=t(7516),o=t(6410),i=t(7206);function c(){return(0,a.jsx)(l.i,{children:(0,a.jsx)(x,{})})}function x(){let{user:e,coach:r,signOut:t}=(0,o.a)(),[l,c]=(0,s.useState)([]),[x,m]=(0,s.useState)(!0),[h,b]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),u=new i.H;(0,s.useEffect)(()=>{e&&g()},[e]),(0,s.useEffect)(()=>{let r=()=>{e&&g()};return window.addEventListener("focus",r),()=>window.removeEventListener("focus",r)},[e]);let g=async()=>{if(e)try{m(!0),b(null);let r=await u.getCoachDocuments(e.uid,50);c(r)}catch(e){console.error("Error loading plans:",e),b("Failed to load plans. Please try again.")}finally{m(!1)}},j=async()=>{try{await t()}catch(e){console.error("Error signing out:",e)}},N=async r=>{if(e&&confirm("Are you sure you want to delete this plan? This action cannot be undone."))try{await u.deleteDocument(r,e.uid),await g()}catch(e){console.error("Error deleting plan:",e),alert("Failed to delete plan. Please try again.")}},v=l.filter(e=>e.clientName.toLowerCase().includes(p.toLowerCase())),w={totalPlans:l.length,publishedPlans:l.filter(e=>"published"===e.status).length,draftPlans:l.filter(e=>"draft"===e.status).length,recentActivity:l.length>0?"Active":"No plans yet"};return(0,a.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[(0,a.jsx)("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"I"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Coach Dashboard"}),r&&(0,a.jsxs)("p",{className:"text-brand-white/70 text-sm font-prompt",children:["Welcome back, ",r.name]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.default,{href:"/dashboard/plans/create",children:(0,a.jsx)(d.z,{variant:"primary",children:"Create New Plan"})}),(0,a.jsx)(n.default,{href:"/dashboard/profile",children:(0,a.jsx)(d.z,{variant:"secondary",className:"text-brand-white border-brand-white/20 hover:bg-brand-white/10",children:"Profile"})}),(0,a.jsx)(d.z,{variant:"secondary",onClick:j,className:"text-brand-white border-brand-white/20 hover:bg-brand-white/10",children:"Sign Out"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-semibold text-brand-dark mb-2",children:"Total Plans"}),(0,a.jsx)("p",{className:"text-3xl font-prompt font-bold text-brand-gold",children:x?"...":w.totalPlans})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-semibold text-brand-dark mb-2",children:"Published"}),(0,a.jsx)("p",{className:"text-3xl font-prompt font-bold text-green-600",children:x?"...":w.publishedPlans})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-semibold text-brand-dark mb-2",children:"Drafts"}),(0,a.jsx)("p",{className:"text-3xl font-prompt font-bold text-yellow-600",children:x?"...":w.draftPlans})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-semibold text-brand-dark mb-2",children:"Status"}),(0,a.jsx)("p",{className:"text-lg font-prompt font-bold text-brand-gold",children:x?"Loading...":w.recentActivity})]})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("div",{className:"p-6 border-b border-brand-gold/20",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"font-prompt font-bold text-xl text-brand-dark",children:["Nutrition Plans (",v.length,")"]}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt text-sm",children:"Manage your client nutrition plans"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-brand-dark/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"Search by client name...",className:"w-full sm:w-64 pl-10 pr-4 py-2 border border-brand-gold/20 rounded-lg bg-brand-white   focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent   font-prompt text-brand-dark placeholder-brand-dark/40"})]}),(0,a.jsxs)(d.z,{onClick:g,variant:"secondary",size:"sm",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:x?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-2xl",children:"I"})}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:"Loading your plans..."})]}):h?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-prompt font-bold text-2xl",children:"!"})}),(0,a.jsx)("h3",{className:"font-prompt font-bold text-xl text-brand-dark mb-2",children:"Error Loading Plans"}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt mb-4",children:h}),(0,a.jsx)(d.z,{onClick:g,variant:"primary",children:"Try Again"})]}):0===v.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-brand-gold/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-gold text-2xl",children:"\uD83D\uDCCB"})}),(0,a.jsx)("h3",{className:"font-prompt font-bold text-xl text-brand-dark mb-2",children:p?"No Plans Found":"No Plans Yet"}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt mb-4",children:p?'No plans found matching "'.concat(p,'". Try a different search term.'):"Create your first nutrition plan to get started."}),!p&&(0,a.jsx)(n.default,{href:"/dashboard/plans/create",children:(0,a.jsx)(d.z,{variant:"primary",children:"Create Your First Plan"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:v.map(e=>{let r=e.ingredients.filter(e=>e.isSelected).length,t=e.ingredients.length;return(0,a.jsx)("div",{className:"border border-brand-gold/20 rounded-lg p-4 hover:border-brand-gold hover:bg-brand-cream/30 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsxs)("h3",{className:"font-prompt font-bold text-lg text-brand-dark",children:[e.clientName,"'s Nutrition Plan"]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-prompt font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"published"===e.status?"Published":"Draft"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-brand-dark/60 font-prompt",children:[(0,a.jsxs)("span",{children:["Created: ",e.createdAt.toDate().toLocaleDateString()]}),(0,a.jsxs)("span",{children:["Updated: ",e.updatedAt.toDate().toLocaleDateString()]}),(0,a.jsxs)("span",{children:["Foods: ",r," selected of ",t]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.default,{href:"/dashboard/plans/".concat(e.id),children:(0,a.jsx)(d.z,{variant:"secondary",size:"sm",children:"View"})}),(0,a.jsx)(n.default,{href:"/dashboard/plans/".concat(e.id,"/edit"),children:(0,a.jsx)(d.z,{variant:"primary",size:"sm",children:"Edit"})}),(0,a.jsx)(d.z,{variant:"secondary",size:"sm",onClick:()=>N(e.id),className:"text-red-600 hover:bg-red-50 border-red-200",children:"Delete"})]})]})},e.id)})})})]}),!x&&v.length>0&&(0,a.jsxs)("div",{className:"mt-8 bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-6",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(n.default,{href:"/dashboard/plans/create",children:(0,a.jsx)("div",{className:"p-4 border-2 border-dashed border-brand-gold/30 rounded-lg hover:border-brand-gold hover:bg-brand-cream/50 transition-colors cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-brand-gold/10 rounded-lg mx-auto mb-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-gold text-xl",children:"�"})}),(0,a.jsx)("h3",{className:"font-prompt font-medium text-brand-dark",children:"Create New Plan"}),(0,a.jsx)("p",{className:"text-sm text-brand-dark/60 mt-1",children:"Design a nutrition plan"})]})})}),(0,a.jsx)("div",{onClick:()=>{var e;let r="".concat(window.location.origin,"/share/").concat(null===(e=v[0])||void 0===e?void 0:e.shareToken);navigator.clipboard.writeText(r),alert("Latest plan share link copied to clipboard!")},className:"p-4 border-2 border-dashed border-brand-gold/30 rounded-lg hover:border-brand-gold hover:bg-brand-cream/50 transition-colors cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-brand-gold/10 rounded-lg mx-auto mb-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-gold text-xl",children:"\uD83D\uDD17"})}),(0,a.jsx)("h3",{className:"font-prompt font-medium text-brand-dark",children:"Share Latest Plan"}),(0,a.jsx)("p",{className:"text-sm text-brand-dark/60 mt-1",children:"Copy share link"})]})}),(0,a.jsx)(n.default,{href:"/dashboard/profile",children:(0,a.jsx)("div",{className:"p-4 border-2 border-dashed border-brand-gold/30 rounded-lg hover:border-brand-gold hover:bg-brand-cream/50 transition-colors cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-brand-gold/10 rounded-lg mx-auto mb-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-gold text-xl",children:"⚙️"})}),(0,a.jsx)("h3",{className:"font-prompt font-medium text-brand-dark",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-brand-dark/60 mt-1",children:"Manage your profile"})]})})})]})]})]})]})}}},function(e){e.O(0,[358,139,990,836,38,732,971,23,744],function(){return e(e.s=1181)}),_N_E=e.O()}]);