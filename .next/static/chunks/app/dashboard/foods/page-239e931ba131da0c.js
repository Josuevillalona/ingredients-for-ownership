(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{7216:function(e,r,t){Promise.resolve().then(t.bind(t,2383))},2383:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var s=t(7437),a=t(2265),n=t(6760),o=t(4977);t(1727);let l={blue:{name:"Blue Foods",description:"Nutrient-dense, unlimited consumption",color:"bg-food-blue-100 text-food-blue-800 border-food-blue-200",examples:["Spinach","Kale","Broccoli","Cauliflower","Bell Peppers","Lean proteins (chicken breast, fish)","Egg whites"]},yellow:{name:"Yellow Foods",description:"Moderate portions, balanced intake",color:"bg-food-yellow-100 text-food-yellow-800 border-food-yellow-200",examples:["Brown rice","Quinoa","Sweet potatoes","Whole grain bread","Avocado","Nuts","Seeds","Olive oil"]},red:{name:"Red Foods",description:"Limited portions, occasional consumption",color:"bg-food-red-100 text-food-red-800 border-food-red-200",examples:["Processed foods","Sugary snacks","Fried foods","White bread","Candy","Soda","Fast food"]}};function i(e){let{food:r,onEdit:t,onDelete:a,onSelect:n,isSelectable:i=!1,isSelected:d=!1,showActions:c=!0}=e,m=!r.isGlobal;return(0,s.jsxs)("div",{className:"\n        bg-white rounded-lg border p-4 transition-all duration-200\n        ".concat(i?"cursor-pointer hover:shadow-md hover:border-brand-gold":"","\n        ").concat(d?"ring-2 ring-brand-gold border-brand-gold":"border-gray-200","\n      "),onClick:()=>{i&&n&&n(r)},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:r.name}),(0,s.jsx)(o.r,{category:r.category,children:l[r.category].name})]}),c&&m&&(0,s.jsxs)("div",{className:"flex gap-2 ml-3",children:[t&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),t(r)},className:"text-sm text-brand-gold hover:text-brand-dark transition-colors",children:"Edit"}),a&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),a(r)},className:"text-sm text-red-600 hover:text-red-800 transition-colors",children:"Delete"})]})]}),r.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:r.description}),r.servingSize&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Serving size:"})," ",r.servingSize]}),r.portionGuidelines&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Guidelines:"})," ",r.portionGuidelines]}),r.nutritionalInfo&&Object.keys(r.nutritionalInfo).length>0&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[r.nutritionalInfo.calories&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Calories:"})," ",r.nutritionalInfo.calories]}),r.nutritionalInfo.protein&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Protein:"})," ",r.nutritionalInfo.protein,"g"]}),r.nutritionalInfo.carbs&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Carbs:"})," ",r.nutritionalInfo.carbs,"g"]}),r.nutritionalInfo.fat&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Fat:"})," ",r.nutritionalInfo.fat,"g"]})]})}),r.tags.length>0&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:r.tags.map((e,r)=>(0,s.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e},r))})}),r.isGlobal&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,s.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:"Global Food"})})]})}function d(e){let{onSubmit:r,onCancel:t,initialData:i,isLoading:d=!1}=e,[c,m]=(0,a.useState)(()=>({name:(null==i?void 0:i.name)||"",category:(null==i?void 0:i.category)||"blue",description:(null==i?void 0:i.description)||"",servingSize:(null==i?void 0:i.servingSize)||"",portionGuidelines:(null==i?void 0:i.portionGuidelines)||"",nutritionalInfo:(null==i?void 0:i.nutritionalInfo)||{},tags:(null==i?void 0:i.tags)||[]})),[g,u]=(0,a.useState)({}),[x,b]=(0,a.useState)(""),p=()=>{let e={};return c.name.trim()||(e.name="Food name is required"),u(e),0===Object.keys(e).length},h=async e=>{if(e.preventDefault(),p())try{await r(c)}catch(e){console.error("Form submission error:",e)}},f=()=>{let e=x.trim().toLowerCase();e&&!c.tags.includes(e)&&(m(r=>({...r,tags:[...r.tags,e]})),b(""))},y=e=>{m(r=>({...r,tags:r.tags.filter(r=>r!==e)}))},j=(e,r)=>{let t=""===r?void 0:parseFloat(r);m(r=>({...r,nutritionalInfo:{...r.nutritionalInfo,[e]:t}}))};return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:i?"Edit Food Item":"Add New Food Item"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Add foods to your personal database for easy plan creation."})]}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Name *"}),(0,s.jsx)("input",{type:"text",id:"name",value:c.name,onChange:e=>m(r=>({...r,name:e.target.value})),className:"\n                w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors\n                ".concat(g.name?"border-red-300":"border-gray-300","\n              "),placeholder:"Enter food name..."}),g.name&&(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Food Category *"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:Object.entries(l).map(e=>{let[r,t]=e;return(0,s.jsxs)("label",{className:"cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"category",value:r,checked:c.category===r,onChange:e=>m(r=>({...r,category:e.target.value})),className:"sr-only"}),(0,s.jsxs)("div",{className:"\n                    p-3 border-2 rounded-lg transition-all\n                    ".concat(c.category===r?"border-brand-gold bg-brand-cream":"border-gray-200 hover:border-gray-300","\n                  "),children:[(0,s.jsx)(o.r,{category:r,size:"sm",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:t.description})]})]},r)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{id:"description",value:c.description,onChange:e=>m(r=>({...r,description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"Optional description or notes about this food..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"servingSize",className:"block text-sm font-medium text-gray-700 mb-2",children:"Serving Size"}),(0,s.jsx)("input",{type:"text",id:"servingSize",value:c.servingSize,onChange:e=>m(r=>({...r,servingSize:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"e.g., 1 cup, 100g..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"portionGuidelines",className:"block text-sm font-medium text-gray-700 mb-2",children:"Portion Guidelines"}),(0,s.jsx)("input",{type:"text",id:"portionGuidelines",value:c.portionGuidelines,onChange:e=>m(r=>({...r,portionGuidelines:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"e.g., palm-sized portion..."})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Nutritional Information (Optional)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{key:"calories",label:"Calories",unit:""},{key:"protein",label:"Protein",unit:"g"},{key:"carbs",label:"Carbs",unit:"g"},{key:"fat",label:"Fat",unit:"g"}].map(e=>{var r;let{key:t,label:a,unit:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:[a," ",n&&"(".concat(n,")")]}),(0,s.jsx)("input",{type:"number",id:t,step:"0.1",min:"0",value:(null===(r=c.nutritionalInfo)||void 0===r?void 0:r[t])||"",onChange:e=>j(t,e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"0"})]},t)})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tags"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f())},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"Add tags for easier searching..."}),(0,s.jsx)(n.z,{type:"button",variant:"secondary",onClick:f,disabled:!x.trim(),children:"Add"})]}),c.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map((e,r)=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>y(e),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]},r))})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[(0,s.jsx)(n.z,{type:"submit",isLoading:d,disabled:d,className:"flex-1 sm:flex-none",children:i?"Update Food":"Add Food"}),(0,s.jsx)(n.z,{type:"button",variant:"secondary",onClick:t,disabled:d,children:"Cancel"})]})]})]})}var c=t(5639),m=t(1602),g=t(666);function u(){let{user:e}=(0,g.a)(),{foods:r,loading:t,error:o,createFood:u,updateFood:x,deleteFood:b,searchFoods:p,loadFoods:h}=(0,m.x)(),[f,y]=(0,a.useState)("list"),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[k,C]=(0,a.useState)("all"),[S,F]=(0,a.useState)([]),[A,I]=(0,a.useState)(!1),z=async()=>{let e=r;N.trim()&&(e=await p(N)),"all"!==k&&(e=e.filter(e=>e.category===k)),F(e)};(0,a.useEffect)(()=>{z()},[r,N,k]);let E=async e=>{I(!0);try{await u(e)&&y("list")}finally{I(!1)}},D=async e=>{if(j){I(!0);try{await x(j.id,e)&&(y("list"),v(null))}finally{I(!1)}}},G=async e=>{confirm('Are you sure you want to delete "'.concat(e.name,'"?'))&&await b(e.id)},O=e=>{v(e),y("edit")},L=()=>{y("list"),v(null)};return(0,s.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[(0,s.jsx)("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"\uD83E\uDD57"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Food Database"}),(0,s.jsx)("p",{className:"text-brand-white/80 text-sm",children:"add"===f?"Add Food Manually":"add-fdc"===f?"Add New Food":"edit"===f?"Edit Food":"Manage your food items"})]})]}),"list"===f&&(0,s.jsx)(n.z,{variant:"primary",onClick:()=>y("add-fdc"),children:"Add New Food"})]})})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"space-y-6",children:"add"===f?(0,s.jsx)(d,{onSubmit:E,onCancel:L,isLoading:A}):"add-fdc"===f?(0,s.jsx)(c.f,{onSuccess:e=>{console.log("Successfully added FDC food:",e),y("list"),h()},onCancel:L,onManualAdd:()=>{y("add")}}):"edit"===f&&j?(0,s.jsx)(d,{onSubmit:D,onCancel:L,initialData:j,isLoading:A}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Search foods by name, description, or tags...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>C("all"),className:"px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("all"===k?"bg-brand-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),Object.entries(l).map(e=>{let[r,t]=e;return(0,s.jsx)("button",{onClick:()=>C(r),className:"px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(k===r?"bg-brand-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.name},r)})]})]})}),t&&(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-gold mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading foods..."})]})}),o&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-red-800",children:["Error: ",o]})}),!t&&!o&&(0,s.jsx)(s.Fragment,{children:S.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(e=>(0,s.jsx)(i,{food:e,onEdit:O,onDelete:G,showActions:!0},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4",children:(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N||"all"!==k?"No foods found":"No foods yet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:N||"all"!==k?"Try adjusting your search or filters.":"Start building your food database by adding your first food item."}),"            ",!N&&"all"===k&&(0,s.jsx)(n.z,{onClick:()=>y("add-fdc"),children:"Add Your First Food"})]})}),!t&&!o&&r.length>0&&(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Foods"})]}),Object.entries(l).map(e=>{let[t,a]=e,n=r.filter(e=>e.category===t).length;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:n}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:a.name})]},t)})]})})]})})})]})}},1727:function(e,r,t){"use strict";t.d(r,{Xg:function(){return n},Yl:function(){return a},bZ:function(){return o}});var s=t(9842);function a(e){let r="object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.clientName&&"string"==typeof e.coachId&&(e.createdAt instanceof s.EK||null!=e.createdAt)&&(e.updatedAt instanceof s.EK||null!=e.updatedAt)&&"string"==typeof e.shareToken&&Array.isArray(e.ingredients)&&["draft","published"].includes(e.status);return r||console.log("Invalid IngredientDocument:",{hasId:"string"==typeof e.id,hasClientName:"string"==typeof e.clientName,hasCoachId:"string"==typeof e.coachId,hasCreatedAt:e.createdAt instanceof s.EK||null!=e.createdAt,hasUpdatedAt:e.updatedAt instanceof s.EK||null!=e.updatedAt,hasShareToken:"string"==typeof e.shareToken,hasIngredients:Array.isArray(e.ingredients),hasValidStatus:["draft","published"].includes(e.status),actualData:e}),r}function n(e){return"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"number"==typeof e.order&&Array.isArray(e.foods)}function o(e){return"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.categoryId}}},function(e){e.O(0,[358,139,990,836,367,639,971,23,744],function(){return e(e.s=7216)}),_N_E=e.O()}]);