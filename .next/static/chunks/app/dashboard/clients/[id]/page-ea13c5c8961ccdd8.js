(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{4427:function(e,t,r){Promise.resolve().then(r.bind(r,5359))},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5359:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(2265),n=r(6463),i=r(7138),d=r(6760),l=r(666),o=r(3196);function c(){let{id:e}=(0,n.useParams)();(0,n.useRouter)();let{user:t}=(0,l.a)(),[r,c]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(t&&e){h(!0),x(null);try{let r=await o.T.getClient(e,t.uid);c(r)}catch(e){x(e.message)}finally{h(!1)}}})()},[t,e]);let b=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Unknown";return m?(0,a.jsx)("div",{className:"min-h-screen bg-brand-cream",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-12 shadow-sm border border-brand-gold/20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-brand-gold border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:"Loading client details..."})]})})}):u||!r?(0,a.jsx)("div",{className:"min-h-screen bg-brand-cream",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-12 shadow-sm border border-brand-gold/20 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),(0,a.jsx)("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-4",children:"Client Not Found"}),(0,a.jsx)("p",{className:"text-brand-dark/60 mb-6",children:u||"The client you are looking for does not exist or you do not have access to it."}),(0,a.jsx)(i.default,{href:"/dashboard/clients",children:(0,a.jsx)(d.z,{variant:"primary",children:"Back to Clients"})})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[(0,a.jsx)("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(i.default,{href:"/dashboard/clients",className:"text-brand-white/60 hover:text-brand-white",children:"← Back to Clients"}),(0,a.jsx)("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:r.name})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.z,{variant:"outline",className:"text-brand-white border-brand-white/30",children:"Edit Client"}),(0,a.jsx)(d.z,{variant:"primary",children:"Create Plan"})]})]})})}),(0,a.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-4",children:"Client Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-dark/60 mb-1",children:"Full Name"}),(0,a.jsx)("p",{className:"text-brand-dark font-prompt text-lg",children:r.name})]}),r.email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-dark/60 mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-brand-dark font-prompt",children:r.email})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-dark/60 mb-1",children:"Client Since"}),(0,a.jsx)("p",{className:"text-brand-dark font-prompt text-sm",children:b(r.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-dark/60 mb-1",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-brand-dark font-prompt text-sm",children:b(r.lastUpdated)})]})]})]})]}),r.sessionNotes&&(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-4",children:"Session Notes"}),(0,a.jsx)("p",{className:"text-brand-dark/80 whitespace-pre-wrap leading-relaxed",children:r.sessionNotes})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"font-prompt font-bold text-xl text-brand-dark",children:"Nutrition Plans"}),(0,a.jsx)(d.z,{variant:"primary",size:"sm",children:"Create New Plan"})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-brand-cream rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-gold text-2xl",children:"\uD83D\uDCCB"})}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:"No nutrition plans created yet. Create the first plan to get started."})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-bold text-lg text-brand-dark mb-4",children:"Health Goals"}),r.goals.length>0?(0,a.jsx)("div",{className:"space-y-3",children:r.goals.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-brand-gold rounded-full mt-2 mr-3 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-brand-dark/80 text-sm leading-relaxed",children:e})]},t))}):(0,a.jsx)("p",{className:"text-brand-dark/60 text-sm font-prompt",children:"No goals specified"})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-bold text-lg text-brand-dark mb-4",children:"Dietary Restrictions"}),r.restrictions.length>0?(0,a.jsx)("div",{className:"space-y-2",children:r.restrictions.map((e,t)=>(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-red-50 text-red-600 rounded-md text-sm font-prompt mr-2 mb-2",children:e},t))}):(0,a.jsx)("p",{className:"text-brand-dark/60 text-sm font-prompt",children:"No restrictions specified"})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[(0,a.jsx)("h3",{className:"font-prompt font-bold text-lg text-brand-dark mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full",children:"\uD83D\uDCE7 Send Email"}),(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full",children:"\uD83D\uDCDD Add Session Notes"}),(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full",children:"\uD83C\uDFAF Update Goals"}),(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-200",children:"\uD83D\uDDD1️ Delete Client"})]})]})]})]})})]})}},6410:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return h},a:function(){return m}});var a=r(7437),s=r(2265),n=r(5735),i=r(9842),d=r(5419);class l{async signIn(e,t){try{return(await (0,n.e5)(d.I,e,t)).user}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async createCoach(e,t,r){try{let a=await (0,n.Xb)(d.I,e,t),s={email:e,name:r,createdAt:i.EK.now(),preferences:{colorCodingStyle:"standard"}};await (0,i.pl)((0,i.JU)(d.db,"coaches",a.user.uid),s)}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async signOut(){try{await (0,n.w7)(d.I)}catch(e){throw Error("Failed to sign out. Please try again.")}}async getCoachProfile(e){try{let t=(0,i.JU)(d.db,"coaches",e),r=await (0,i.QT)(t);if(r.exists())return{id:r.id,...r.data()};return null}catch(e){return console.error("Error fetching coach profile:",e),null}}onAuthStateChange(e){return(0,n.Aj)(d.I,e)}getCurrentUser(){return d.I.currentUser}getAuthErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred during authentication. Please try again."}}}let o=new l,c=(0,s.createContext)(void 0);function m(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[l,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>o.onAuthStateChange(async e=>{if(n(e),e)try{let t=await o.getCoachProfile(e.uid);d(t)}catch(e){console.error("Error fetching coach profile:",e),d(null)}else d(null);m(!1)}),[]);let h=async(e,t)=>{m(!0);try{await o.signIn(e,t)}catch(e){throw m(!1),e}},u=async(e,t,r)=>{m(!0);try{await o.createCoach(e,t,r),await o.signIn(e,t)}catch(e){throw m(!1),e}},x=async()=>{m(!0);try{await o.signOut()}catch(e){throw m(!1),e}},b=async()=>{if(r)try{let e=await o.getCoachProfile(r.uid);d(e)}catch(e){console.error("Error refreshing coach profile:",e)}};return(0,a.jsx)(c.Provider,{value:{user:r,coach:i,loading:l,signIn:h,signUp:u,signOut:x,refreshCoachProfile:b},children:t})}},6760:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var a=r(7437);r(2265);var s=r(4839);function n(e){let{variant:t="primary",size:r="md",children:n,isLoading:i=!1,disabled:d,className:l,...o}=e;return(0,a.jsx)("button",{className:(0,s.W)("font-prompt font-medium transition-all duration-200 focus:ring-2 focus:ring-brand-focus focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brand-gold text-brand-dark hover:bg-brand-hover disabled:hover:bg-brand-gold",secondary:"bg-brand-dark text-brand-white hover:bg-brand-dark/90",outline:"border-2 border-brand-gold text-brand-gold hover:bg-brand-gold hover:text-brand-dark",ghost:"text-brand-gold hover:bg-brand-gold/10"}[t],{sm:"px-3 py-1.5 text-sm rounded-md min-h-[36px]",md:"px-4 py-2 text-base rounded-lg min-h-[44px] touch-target",lg:"px-6 py-3 text-lg rounded-lg min-h-[52px]"}[r],l),disabled:d||i,...o,children:i?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Loading..."})]}):n})}},3196:function(e,t,r){"use strict";r.d(t,{T:function(){return i}});var a=r(9842),s=r(5419);class n{async createClient(e,t){try{var r,n;let i=(0,a.JU)((0,a.hJ)(s.db,this.collectionName)),d=i.id,l={coachId:e,name:t.name.trim(),sessionNotes:(null===(r=t.sessionNotes)||void 0===r?void 0:r.trim())||"",goals:t.goals.filter(e=>e.trim().length>0),restrictions:t.restrictions.filter(e=>e.trim().length>0),createdAt:a.EK.now(),lastUpdated:a.EK.now()};return(null===(n=t.email)||void 0===n?void 0:n.trim())&&(l.email=t.email.trim()),await (0,a.pl)(i,l),d}catch(e){throw Error("Failed to create client: ".concat(e.message))}}async getClientsForCoach(e){try{let t=(0,a.IO)((0,a.hJ)(s.db,this.collectionName),(0,a.ar)("coachId","==",e),(0,a.Xo)("lastUpdated","desc"));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw Error("Failed to fetch clients: ".concat(e.message))}}async getClient(e,t){try{let r=await (0,a.QT)((0,a.JU)(s.db,this.collectionName,e));if(!r.exists())return null;let n=r.data();if(n.coachId!==t)throw Error("Access denied: Client belongs to different coach");return{id:r.id,...n}}catch(e){throw Error("Failed to fetch client: ".concat(e.message))}}async updateClient(e,t,r){try{var n,i,d;if(!await this.getClient(e,t))throw Error("Client not found or access denied");let l={lastUpdated:a.EK.now()};(null===(n=r.name)||void 0===n?void 0:n.trim())&&(l.name=r.name.trim()),void 0!==r.email&&(l.email=(null===(i=r.email)||void 0===i?void 0:i.trim())||void 0),void 0!==r.sessionNotes&&(l.sessionNotes=(null===(d=r.sessionNotes)||void 0===d?void 0:d.trim())||""),r.goals&&(l.goals=r.goals.filter(e=>e.trim().length>0)),r.restrictions&&(l.restrictions=r.restrictions.filter(e=>e.trim().length>0)),await (0,a.r7)((0,a.JU)(s.db,this.collectionName,e),l)}catch(e){throw Error("Failed to update client: ".concat(e.message))}}async deleteClient(e,t){try{if(!await this.getClient(e,t))throw Error("Client not found or access denied");await (0,a.oe)((0,a.JU)(s.db,this.collectionName,e))}catch(e){throw Error("Failed to delete client: ".concat(e.message))}}async searchClients(e,t){try{let r=await this.getClientsForCoach(e);if(!t.trim())return r;let a=t.toLowerCase();return r.filter(e=>{var t;return e.name.toLowerCase().includes(a)||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(a))||e.goals.some(e=>e.toLowerCase().includes(a))})}catch(e){throw Error("Failed to search clients: ".concat(e.message))}}constructor(){this.collectionName="clients"}}let i=new n},5419:function(e,t,r){"use strict";r.d(t,{I:function(){return l},db:function(){return d}});var a=r(5236),s=r(9842),n=r(5735);let i=(0,a.ZF)({apiKey:"AIzaSyBQZagyMTpFNsoSOh4cKT8PVV_xbCuiX8s",authDomain:"ingredients-for-ownershi-81eaf.firebaseapp.com",projectId:"ingredients-for-ownershi-81eaf",storageBucket:"ingredients-for-ownershi-81eaf.firebasestorage.app",messagingSenderId:"855662446831",appId:"1:855662446831:web:deff590004f93f5cec731a"}),d=(0,s.ad)(i),l=(0,n.v0)(i)},666:function(e,t,r){"use strict";r.d(t,{a:function(){return a.a}});var a=r(6410)}},function(e){e.O(0,[358,139,990,836,38,971,23,744],function(){return e(e.s=4427)}),_N_E=e.O()}]);