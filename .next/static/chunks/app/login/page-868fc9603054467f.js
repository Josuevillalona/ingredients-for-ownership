(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3332:function(e,r,t){Promise.resolve().then(t.bind(t,1193))},6463:function(e,r,t){"use strict";var a=t(1169);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},1193:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var a=t(7437),n=t(2265),s=t(6463),o=t(6760),i=t(6410);function d(){let[e,r]=(0,n.useState)({email:"",password:""}),[t,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),l=(0,s.useRouter)(),{signIn:h}=(0,i.a)(),f=async r=>{r.preventDefault(),d(""),u(!0);try{await h(e.email,e.password),l.push("/dashboard")}catch(e){d(e.message)}finally{u(!1)}},m=e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))};return(0,a.jsx)("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-white font-prompt font-bold text-2xl",children:"I"})}),(0,a.jsx)("h1",{className:"font-prompt font-bold text-3xl text-brand-dark mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-brand-dark/60 font-prompt",children:"Sign in to create amazing nutrition plans"})]}),(0,a.jsxs)("div",{className:"bg-brand-white rounded-xl shadow-sm border border-brand-gold/20 p-8",children:[(0,a.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[t&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-red-600 text-sm font-prompt",children:t})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Email Address"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:m,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-focus focus:border-transparent font-prompt text-base",placeholder:"coach@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:e.password,onChange:m,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-focus focus:border-transparent font-prompt text-base",placeholder:"Your password"})]}),(0,a.jsx)(o.z,{type:"submit",variant:"primary",size:"lg",className:"w-full",isLoading:c,children:"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-brand-dark/60 text-sm font-prompt",children:["Don't have an account?"," ",(0,a.jsx)("button",{onClick:()=>l.push("/signup"),className:"text-brand-gold hover:text-brand-hover font-medium",children:"Create one here"})]})})]})]})})}},6410:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return h},a:function(){return l}});var a=t(7437),n=t(2265),s=t(5735),o=t(9842),i=t(5419);class d{async signIn(e,r){try{return(await (0,s.e5)(i.I,e,r)).user}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async createCoach(e,r,t){try{let a=await (0,s.Xb)(i.I,e,r),n={email:e,name:t,createdAt:o.EK.now(),preferences:{colorCodingStyle:"standard"}};await (0,o.pl)((0,o.JU)(i.db,"coaches",a.user.uid),n)}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async signOut(){try{await (0,s.w7)(i.I)}catch(e){throw Error("Failed to sign out. Please try again.")}}async getCoachProfile(e){try{let r=(0,o.JU)(i.db,"coaches",e),t=await (0,o.QT)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){return console.error("Error fetching coach profile:",e),null}}onAuthStateChange(e){return(0,s.Aj)(i.I,e)}getCurrentUser(){return i.I.currentUser}getAuthErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred during authentication. Please try again."}}}let c=new d,u=(0,n.createContext)(void 0);function l(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h(e){let{children:r}=e,[t,s]=(0,n.useState)(null),[o,i]=(0,n.useState)(null),[d,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>c.onAuthStateChange(async e=>{if(s(e),e)try{let r=await c.getCoachProfile(e.uid);i(r)}catch(e){console.error("Error fetching coach profile:",e),i(null)}else i(null);l(!1)}),[]);let h=async(e,r)=>{l(!0);try{await c.signIn(e,r)}catch(e){throw l(!1),e}},f=async(e,r,t)=>{l(!0);try{await c.createCoach(e,r,t),await c.signIn(e,r)}catch(e){throw l(!1),e}},m=async()=>{l(!0);try{await c.signOut()}catch(e){throw l(!1),e}},p=async()=>{if(t)try{let e=await c.getCoachProfile(t.uid);i(e)}catch(e){console.error("Error refreshing coach profile:",e)}};return(0,a.jsx)(u.Provider,{value:{user:t,coach:o,loading:d,signIn:h,signUp:f,signOut:m,refreshCoachProfile:p},children:r})}},6760:function(e,r,t){"use strict";t.d(r,{z:function(){return s}});var a=t(7437);t(2265);var n=t(4839);function s(e){let{variant:r="primary",size:t="md",children:s,isLoading:o=!1,disabled:i,className:d,...c}=e;return(0,a.jsx)("button",{className:(0,n.W)("font-prompt font-medium transition-all duration-200 focus:ring-2 focus:ring-brand-focus focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brand-gold text-brand-dark hover:bg-brand-hover disabled:hover:bg-brand-gold",secondary:"bg-brand-dark text-brand-white hover:bg-brand-dark/90",outline:"border-2 border-brand-gold text-brand-gold hover:bg-brand-gold hover:text-brand-dark",ghost:"text-brand-gold hover:bg-brand-gold/10"}[r],{sm:"px-3 py-1.5 text-sm rounded-md min-h-[36px]",md:"px-4 py-2 text-base rounded-lg min-h-[44px] touch-target",lg:"px-6 py-3 text-lg rounded-lg min-h-[52px]"}[t],d),disabled:i||o,...c,children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Loading..."})]}):s})}},5419:function(e,r,t){"use strict";t.d(r,{I:function(){return d},db:function(){return i}});var a=t(5236),n=t(9842),s=t(5735);let o=(0,a.ZF)({apiKey:"AIzaSyBQZagyMTpFNsoSOh4cKT8PVV_xbCuiX8s",authDomain:"ingredients-for-ownershi-81eaf.firebaseapp.com",projectId:"ingredients-for-ownershi-81eaf",storageBucket:"ingredients-for-ownershi-81eaf.firebasestorage.app",messagingSenderId:"855662446831",appId:"1:855662446831:web:deff590004f93f5cec731a"}),i=(0,n.ad)(o),d=(0,s.v0)(o)},4839:function(e,r,t){"use strict";function a(){for(var e,r,t=0,a="",n=arguments.length;t<n;t++)(e=arguments[t])&&(r=function e(r){var t,a,n="";if("string"==typeof r||"number"==typeof r)n+=r;else if("object"==typeof r){if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(a=e(r[t]))&&(n&&(n+=" "),n+=a)}else for(a in r)r[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=r);return a}t.d(r,{W:function(){return a}})}},function(e){e.O(0,[358,139,990,836,971,23,744],function(){return e(e.s=3332)}),_N_E=e.O()}]);