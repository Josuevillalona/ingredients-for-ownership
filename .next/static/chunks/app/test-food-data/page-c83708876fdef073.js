(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[955],{3988:function(e,t,s){Promise.resolve().then(s.bind(s,1459))},1459:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var o=s(7437),a=s(2265),r=s(3408),n=s(1727),i=s(1088);function l(e){let{food:t,children:s,showOnHover:r=!0}=e,[n,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,g]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),m=i.U.hasNutritionalData(t),f=async()=>{if(m&&!n&&!c){d(!0),x(null);try{let e=await i.U.getNutritionalInfo(t);l(e)}catch(e){x("Failed to load nutrition data"),console.error("Error loading nutrition:",e)}finally{d(!1)}}};return(0,o.jsxs)("div",{className:"relative inline-block",onMouseEnter:()=>{console.log("\uD83D\uDDB1️ Mouse enter:",t.name,"FDC ID:",t.fdcId,"Has nutrition data:",m),r&&m&&(g(!0),f())},onMouseLeave:()=>{console.log("\uD83D\uDDB1️ Mouse leave:",t.name),r&&g(!1)},onClick:()=>{console.log("\uD83D\uDDB1️ Click:",t.name,"FDC ID:",t.fdcId,"Has nutrition data:",m),m&&(g(!u),f())},children:[(0,o.jsxs)("div",{className:"".concat(m?"cursor-pointer":""," flex items-center gap-1"),children:[s,m&&(0,o.jsx)("span",{className:"text-xs text-blue-500 opacity-60 hover:opacity-100 transition-opacity",children:"ℹ️"})]}),u&&m&&(0,o.jsxs)("div",{className:"absolute z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 min-w-64 top-full left-0 mt-2",children:[(0,o.jsxs)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[t.name," - Nutrition Facts"]}),c&&(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Loading nutrition data..."}),h&&(0,o.jsx)("div",{className:"text-xs text-red-500",children:h}),n&&(0,o.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:n.servingInfo}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:n.calories})," calories"]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("strong",{children:[n.protein,"g"]})," protein"]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("strong",{children:[n.carbs,"g"]})," carbs"]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("strong",{children:[n.fat,"g"]})," fat"]}),n.fiber>0&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("strong",{children:[n.fiber,"g"]})," fiber"]}),n.sugar>0&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("strong",{children:[n.sugar,"g"]})," sugar"]})]}),n.sodium>0&&(0,o.jsxs)("div",{className:"pt-1 border-t border-gray-200",children:[(0,o.jsxs)("strong",{children:[n.sodium,"mg"]})," sodium"]}),(0,o.jsxs)("div",{className:"pt-1 text-gray-400 text-xs",children:["Source: ",n.source]})]})]})]})}function c(){let[e,t]=(0,a.useState)(null);(0,a.useEffect)(()=>{try{!function(){let e=function(){let e=[];console.log("\uD83E\uDDEA Testing complete food database structure..."),console.log("\uD83D\uDCCA Database Stats:",r.WL);try{for(let t of r.$V){let s=(null==t?void 0:t.name)||"unknown";if(console.log("Testing category: ".concat(s)),!(0,n.Xg)(t)){e.push("Invalid category structure: ".concat((null==t?void 0:t.id)||"unknown"));continue}for(let o of t.foods)(0,n.bZ)(o)||e.push("Invalid food structure: ".concat((null==o?void 0:o.id)||"unknown"," in ").concat(s)),o.categoryId!==t.id&&e.push("Food categoryId mismatch: ".concat(o.id," (expected: ").concat(t.id,", got: ").concat(o.categoryId,")"))}if(0===e.length)return console.log("✅ All food category data is valid!"),console.log("\uD83D\uDCCA Total: ".concat(r.WL.totalCategories," categories with ").concat(r.WL.totalFoods," total foods")),r.WL.categoriesWithCounts.forEach(e=>{console.log("  - ".concat(e.name,": ").concat(e.count," items"))}),{isValid:!0,errors:[]};return console.log("❌ Found validation errors:",e),{isValid:!1,errors:e}}catch(e){return console.error("❌ Validation failed with error:",e),{isValid:!1,errors:["Validation error: ".concat(e)]}}}();e.isValid?console.log("\uD83C\uDF89 Food data validation passed!"):(console.error("\uD83D\uDCA5 Food data validation failed:"),e.errors.forEach(e=>console.error("  - ".concat(e))))}(),t({isValid:!0,errors:[],categoriesCount:r.WL.totalCategories,foodsCount:r.WL.totalFoods})}catch(e){console.error("Validation failed:",e),t({isValid:!1,errors:[String(e)],categoriesCount:0,foodsCount:0})}},[]);let s=async()=>{console.log("\uD83E\uDDEA Testing nutrition service...");let e=r.$V[0].foods.find(e=>"chicken-skinless"===e.id);if(e){console.log("\uD83D\uDC14 Testing with chicken:",e);try{let t=await i.U.getNutritionalInfo(e);console.log("\uD83D\uDCCA Nutrition data:",t)}catch(e){console.error("❌ Error testing nutrition:",e)}}};return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Food Data Validation Test"}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uD83E\uDDEA Test Nutrition Service"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click this button and check the browser console (F12) for nutrition service logs"})]}),e?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isValid?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"),children:[(0,o.jsx)("h2",{className:"text-lg font-semibold ".concat(e.isValid?"text-green-800":"text-red-800"),children:e.isValid?"✅ Validation Passed":"❌ Validation Failed"}),(0,o.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,o.jsxs)("p",{className:"text-sm text-gray-700",children:["Categories: ",e.categoriesCount]}),(0,o.jsxs)("p",{className:"text-sm text-gray-700",children:["Total Foods: ",e.foodsCount]})]}),e.errors.length>0&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("h3",{className:"text-md font-medium text-red-800 mb-2",children:"Errors:"}),(0,o.jsx)("ul",{className:"space-y-1",children:e.errors.map((e,t)=>(0,o.jsxs)("li",{className:"text-sm text-red-700",children:["• ",e]},t))})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Food Categories Preview"}),(0,o.jsx)("div",{className:"space-y-4",children:r.$V.map(e=>(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,o.jsxs)("h3",{className:"font-medium text-gray-900 mb-2",children:[e.name," (",e.foods.length," items)"]}),e.description&&(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.foods.slice(0,4).map(e=>(0,o.jsx)(l,{food:e,children:(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["• ",e.name,e.servingSize&&(0,o.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.servingSize,")"]}),e.fdcId&&(0,o.jsx)("span",{className:"text-blue-500 text-xs ml-1",title:"Nutrition data available",children:"\uD83D\uDCCA"})]})},e.id)),e.foods.length>4&&(0,o.jsxs)("div",{className:"text-sm text-gray-500 italic",children:["... and ",e.foods.length-4," more"]})]})]},e.id))})]})]}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,o.jsx)("p",{className:"mt-2 text-gray-600",children:"Running validation..."})]})]})})}},1727:function(e,t,s){"use strict";s.d(t,{Xg:function(){return r},Yl:function(){return a},bZ:function(){return n}});var o=s(9842);function a(e){let t="object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.clientName&&"string"==typeof e.coachId&&(e.createdAt instanceof o.EK||null!=e.createdAt)&&(e.updatedAt instanceof o.EK||null!=e.updatedAt)&&"string"==typeof e.shareToken&&Array.isArray(e.ingredients)&&["draft","published"].includes(e.status);return t||console.log("Invalid IngredientDocument:",{hasId:"string"==typeof e.id,hasClientName:"string"==typeof e.clientName,hasCoachId:"string"==typeof e.coachId,hasCreatedAt:e.createdAt instanceof o.EK||null!=e.createdAt,hasUpdatedAt:e.updatedAt instanceof o.EK||null!=e.updatedAt,hasShareToken:"string"==typeof e.shareToken,hasIngredients:Array.isArray(e.ingredients),hasValidStatus:["draft","published"].includes(e.status),actualData:e}),t}function r(e){return"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"number"==typeof e.order&&Array.isArray(e.foods)}function n(e){return"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.categoryId}}},function(e){e.O(0,[358,990,885,971,23,744],function(){return e(e.s=3988)}),_N_E=e.O()}]);