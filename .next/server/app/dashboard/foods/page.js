(()=>{var e={};e.id=740,e.ids=[740],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},88329:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),r(64254),r(22834),r(32325),r(35866);var t=r(23191),a=r(88716),o=r(37922),i=r.n(o),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let l=["",{children:["dashboard",{children:["foods",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,64254)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\foods\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32325)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\foods\\page.tsx"],u="/dashboard/foods/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/foods/page",pathname:"/dashboard/foods",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27553:(e,s,r)=>{Promise.resolve().then(r.bind(r,50753))},50753:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(10326),a=r(17577),o=r(99837),i=r(81985);r(92476);let n={blue:{name:"Blue Foods",description:"Nutrient-dense, unlimited consumption",color:"bg-food-blue-100 text-food-blue-800 border-food-blue-200",examples:["Spinach","Kale","Broccoli","Cauliflower","Bell Peppers","Lean proteins (chicken breast, fish)","Egg whites"]},yellow:{name:"Yellow Foods",description:"Moderate portions, balanced intake",color:"bg-food-yellow-100 text-food-yellow-800 border-food-yellow-200",examples:["Brown rice","Quinoa","Sweet potatoes","Whole grain bread","Avocado","Nuts","Seeds","Olive oil"]},red:{name:"Red Foods",description:"Limited portions, occasional consumption",color:"bg-food-red-100 text-food-red-800 border-food-red-200",examples:["Processed foods","Sugary snacks","Fried foods","White bread","Candy","Soda","Fast food"]}};function d({food:e,onEdit:s,onDelete:r,onSelect:a,isSelectable:o=!1,isSelected:d=!1,showActions:l=!0}){let c=!e.isGlobal;return(0,t.jsxs)("div",{className:`
        bg-white rounded-lg border p-4 transition-all duration-200
        ${o?"cursor-pointer hover:shadow-md hover:border-brand-gold":""}
        ${d?"ring-2 ring-brand-gold border-brand-gold":"border-gray-200"}
      `,onClick:()=>{o&&a&&a(e)},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e.name}),t.jsx(i.r,{category:e.category,children:n[e.category].name})]}),l&&c&&(0,t.jsxs)("div",{className:"flex gap-2 ml-3",children:[s&&t.jsx("button",{onClick:r=>{r.stopPropagation(),s(e)},className:"text-sm text-brand-gold hover:text-brand-dark transition-colors",children:"Edit"}),r&&t.jsx("button",{onClick:s=>{s.stopPropagation(),r(e)},className:"text-sm text-red-600 hover:text-red-800 transition-colors",children:"Delete"})]})]}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.servingSize&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[t.jsx("span",{className:"font-medium",children:"Serving size:"})," ",e.servingSize]}),e.portionGuidelines&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[t.jsx("span",{className:"font-medium",children:"Guidelines:"})," ",e.portionGuidelines]}),e.nutritionalInfo&&Object.keys(e.nutritionalInfo).length>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[e.nutritionalInfo.calories&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Calories:"})," ",e.nutritionalInfo.calories]}),e.nutritionalInfo.protein&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Protein:"})," ",e.nutritionalInfo.protein,"g"]}),e.nutritionalInfo.carbs&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Carbs:"})," ",e.nutritionalInfo.carbs,"g"]}),e.nutritionalInfo.fat&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Fat:"})," ",e.nutritionalInfo.fat,"g"]})]})}),e.tags.length>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((e,s)=>t.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e},s))})}),e.isGlobal&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:t.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:"Global Food"})})]})}function l({onSubmit:e,onCancel:s,initialData:r,isLoading:d=!1}){let[l,c]=(0,a.useState)(()=>({name:r?.name||"",category:r?.category||"blue",description:r?.description||"",servingSize:r?.servingSize||"",portionGuidelines:r?.portionGuidelines||"",nutritionalInfo:r?.nutritionalInfo||{},tags:r?.tags||[]})),[u,x]=(0,a.useState)({}),[m,g]=(0,a.useState)(""),p=()=>{let e={};return l.name.trim()||(e.name="Food name is required"),x(e),0===Object.keys(e).length},h=async s=>{if(s.preventDefault(),p())try{await e(l)}catch(e){console.error("Form submission error:",e)}},b=()=>{let e=m.trim().toLowerCase();e&&!l.tags.includes(e)&&(c(s=>({...s,tags:[...s.tags,e]})),g(""))},f=e=>{c(s=>({...s,tags:s.tags.filter(s=>s!==e)}))},y=(e,s)=>{let r=""===s?void 0:parseFloat(s);c(s=>({...s,nutritionalInfo:{...s.nutritionalInfo,[e]:r}}))};return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r?"Edit Food Item":"Add New Food Item"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Add foods to your personal database for easy plan creation."})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Name *"}),t.jsx("input",{type:"text",id:"name",value:l.name,onChange:e=>c(s=>({...s,name:e.target.value})),className:`
                w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors
                ${u.name?"border-red-300":"border-gray-300"}
              `,placeholder:"Enter food name..."}),u.name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.name})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Food Category *"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:Object.entries(n).map(([e,s])=>(0,t.jsxs)("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"radio",name:"category",value:e,checked:l.category===e,onChange:e=>c(s=>({...s,category:e.target.value})),className:"sr-only"}),(0,t.jsxs)("div",{className:`
                    p-3 border-2 rounded-lg transition-all
                    ${l.category===e?"border-brand-gold bg-brand-cream":"border-gray-200 hover:border-gray-300"}
                  `,children:[t.jsx(i.r,{category:e,size:"sm",children:s.name}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.description})]})]},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{id:"description",value:l.description,onChange:e=>c(s=>({...s,description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"Optional description or notes about this food..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"servingSize",className:"block text-sm font-medium text-gray-700 mb-2",children:"Serving Size"}),t.jsx("input",{type:"text",id:"servingSize",value:l.servingSize,onChange:e=>c(s=>({...s,servingSize:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"e.g., 1 cup, 100g..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"portionGuidelines",className:"block text-sm font-medium text-gray-700 mb-2",children:"Portion Guidelines"}),t.jsx("input",{type:"text",id:"portionGuidelines",value:l.portionGuidelines,onChange:e=>c(s=>({...s,portionGuidelines:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"e.g., palm-sized portion..."})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nutritional Information (Optional)"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{key:"calories",label:"Calories",unit:""},{key:"protein",label:"Protein",unit:"g"},{key:"carbs",label:"Carbs",unit:"g"},{key:"fat",label:"Fat",unit:"g"}].map(({key:e,label:s,unit:r})=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-2",children:[s," ",r&&`(${r})`]}),t.jsx("input",{type:"number",id:e,step:"0.1",min:"0",value:l.nutritionalInfo?.[e]||"",onChange:s=>y(e,s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"0"})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tags"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:m,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b())},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors",placeholder:"Add tags for easier searching..."}),t.jsx(o.z,{type:"button",variant:"secondary",onClick:b,disabled:!m.trim(),children:"Add"})]}),l.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:[e,t.jsx("button",{type:"button",onClick:()=>f(e),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]},s))})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[t.jsx(o.z,{type:"submit",isLoading:d,disabled:d,className:"flex-1 sm:flex-none",children:r?"Update Food":"Add Food"}),t.jsx(o.z,{type:"button",variant:"secondary",onClick:s,disabled:d,children:"Cancel"})]})]})]})}var c=r(88549),u=r(92862),x=r(54733);function m(){let{user:e}=(0,x.a)(),{foods:s,loading:r,error:i,createFood:m,updateFood:g,deleteFood:p,searchFoods:h,loadFoods:b}=(0,u.x)(),[f,y]=(0,a.useState)("list"),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[C,k]=(0,a.useState)("all"),[S,F]=(0,a.useState)([]),[A,q]=(0,a.useState)(!1),I=async e=>{q(!0);try{await m(e)&&y("list")}finally{q(!1)}},P=async e=>{if(j){q(!0);try{await g(j.id,e)&&(y("list"),v(null))}finally{q(!1)}}},D=async e=>{confirm(`Are you sure you want to delete "${e.name}"?`)&&await p(e.id)},z=e=>{v(e),y("edit")},E=()=>{y("list"),v(null)};return(0,t.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[t.jsx("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"\uD83E\uDD57"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Food Database"}),t.jsx("p",{className:"text-brand-white/80 text-sm",children:"add"===f?"Add Food Manually":"add-fdc"===f?"Add New Food":"edit"===f?"Edit Food":"Manage your food items"})]})]}),"list"===f&&t.jsx(o.z,{variant:"primary",onClick:()=>y("add-fdc"),children:"Add New Food"})]})})}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:t.jsx("div",{className:"space-y-6",children:"add"===f?t.jsx(l,{onSubmit:I,onCancel:E,isLoading:A}):"add-fdc"===f?t.jsx(c.f,{onSuccess:e=>{console.log("Successfully added FDC food:",e),y("list"),b()},onCancel:E,onManualAdd:()=>{y("add")}}):"edit"===f&&j?t.jsx(l,{onSubmit:P,onCancel:E,initialData:j,isLoading:A}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Search foods by name, description, or tags...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition-colors"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k("all"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${"all"===C?"bg-brand-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),Object.entries(n).map(([e,s])=>t.jsx("button",{onClick:()=>k(e),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${C===e?"bg-brand-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.name},e))]})]})}),r&&t.jsx("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-gold mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading foods..."})]})}),i&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-red-800",children:["Error: ",i]})}),!r&&!i&&t.jsx(t.Fragment,{children:S.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(e=>t.jsx(d,{food:e,onEdit:z,onDelete:D,showActions:!0},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N||"all"!==C?"No foods found":"No foods yet"}),t.jsx("p",{className:"text-gray-600 mb-6",children:N||"all"!==C?"Try adjusting your search or filters.":"Start building your food database by adding your first food item."}),"            ",!N&&"all"===C&&t.jsx(o.z,{onClick:()=>y("add-fdc"),children:"Add Your First Food"})]})}),!r&&!i&&s.length>0&&t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Foods"})]}),Object.entries(n).map(([e,r])=>{let a=s.filter(s=>s.category===e).length;return(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a}),t.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},e)})]})})]})})})]})}},92476:(e,s,r)=>{"use strict";r.d(s,{Yl:()=>a});var t=r(76);function a(e){let s="object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.clientName&&"string"==typeof e.coachId&&(e.createdAt instanceof t.EK||null!=e.createdAt)&&(e.updatedAt instanceof t.EK||null!=e.updatedAt)&&"string"==typeof e.shareToken&&Array.isArray(e.ingredients)&&["draft","published"].includes(e.status);return s||console.log("Invalid IngredientDocument:",{hasId:"string"==typeof e.id,hasClientName:"string"==typeof e.clientName,hasCoachId:"string"==typeof e.coachId,hasCreatedAt:e.createdAt instanceof t.EK||null!=e.createdAt,hasUpdatedAt:e.updatedAt instanceof t.EK||null!=e.updatedAt,hasShareToken:"string"==typeof e.shareToken,hasIngredients:Array.isArray(e.ingredients),hasValidStatus:["draft","published"].includes(e.status),actualData:e}),s}},64254:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>i,__esModule:()=>o,default:()=>n});var t=r(68570);let a=(0,t.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\foods\page.tsx`),{__esModule:o,$$typeof:i}=a;a.default;let n=(0,t.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\foods\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,53,862,133],()=>r(88329));module.exports=t})();