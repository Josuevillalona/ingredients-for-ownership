(()=>{var e={};e.id=39,e.ids=[39],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},94515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(7857),r(22834),r(32325),r(35866);var s=r(23191),a=r(88716),n=r(37922),d=r.n(n),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let l=["",{children:["dashboard",{children:["plans",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7857)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\plans\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32325)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\plans\\[id]\\edit\\page.tsx"],u="/dashboard/plans/[id]/edit/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/plans/[id]/edit/page",pathname:"/dashboard/plans/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4655:(e,t,r)=>{Promise.resolve().then(r.bind(r,48257))},48257:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(10326),a=r(17577),n=r(35047),d=r(56608),i=r(38165),o=r(99837),l=r(90434);r(76025),r(76);var c=r(81370),u=r(107);function x(){return s.jsx(d.i,{children:s.jsx(p,{})})}function p(){let{user:e}=(0,i.a)(),t=(0,n.useRouter)(),r=(0,n.useParams)().id,[d,x]=(0,a.useState)(null),[p,m]=(0,a.useState)([]),[h,b]=(0,a.useState)([]),[g,f]=(0,a.useState)(new Map),[j,v]=(0,a.useState)(""),[N,y]=(0,a.useState)(!0),[w,k]=(0,a.useState)(!1),[C,q]=(0,a.useState)(null),P=new c.H,S=async()=>{if(!e||!j||!d){alert("Please enter a client name before saving.");return}let s=h.filter(e=>{let t=g.get(e.id);return t&&"none"!==t});if(0===s.length){alert("Please select at least one food before saving.");return}k(!0);try{let a=s.map(e=>{let t=g.get(e.id)||"none",r=null,s=!1;return"approved"===t?(r="blue",s=!0):"neutral"===t?(r="yellow",s=!0):"avoid"===t&&(r="red",s=!0),{foodId:e.id,categoryId:e.categoryId||"",colorCode:r,isSelected:s,notes:`Coach marked as: ${t}`}});console.log("Updating document with data:",{clientName:j,ingredients:a,status:"published"}),await P.updateDocument(r,e.uid,{clientName:j,ingredients:a,status:"published"})?t.push(`/dashboard/plans/${r}`):alert("Failed to update document. Please try again.")}catch(e){console.error("Error updating document:",e),alert("Failed to update document. Please try again.")}finally{k(!1)}};if(N)return s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",children:s.jsx("span",{className:"text-brand-white font-prompt font-bold text-2xl",children:"I"})}),s.jsx("p",{className:"text-brand-dark/60 font-prompt",children:"Loading plan for editing..."})]})});if(C||!d)return s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-prompt font-bold text-2xl",children:"!"})}),s.jsx("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-2",children:"Cannot Edit Plan"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt mb-4",children:C}),s.jsx(l.default,{href:"/dashboard",children:s.jsx(o.z,{variant:"primary",children:"Back to Dashboard"})})]})});let _=(()=>{let e={approved:0,neutral:0,avoid:0,none:0};return Array.from(g.values()).forEach(t=>{e[t]++}),e})();return(0,s.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[s.jsx("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx(l.default,{href:`/dashboard/plans/${r}`,className:"text-brand-white/70 hover:text-brand-white",children:"← Back to Plan"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"I"})}),s.jsx("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Edit Nutrition Plan"})]})]})})}),s.jsx("div",{className:"bg-brand-white border-b border-brand-gold/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Client Name"}),s.jsx("input",{type:"text",value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border border-brand-gold/20 rounded-xl bg-brand-white   focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent   font-prompt text-brand-dark placeholder-brand-dark/40",placeholder:"Enter client's name"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-sm font-prompt",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Approved: ",_.approved]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Neutral: ",_.neutral]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Avoid: ",_.avoid]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(o.z,{variant:"secondary",onClick:()=>t.push(`/dashboard/plans/${r}`),children:"Cancel"}),s.jsx(o.z,{variant:"primary",onClick:S,isLoading:w,disabled:!j||_.approved+_.neutral+_.avoid===0,children:w?"Saving...":"Update Plan"})]})]})})}),s.jsx(u.gS,{foods:h.map(e=>({id:e.id,name:e.name,status:g.get(e.id)||"none",categoryId:e.categoryId,nutritionalHighlights:e.nutritionalHighlights})),categories:p.map(e=>({id:e.id,title:e.name,order:e.order})),onStatusChange:(e,t)=>{f(r=>{let s=new Map(r);return s.set(e,t),s})}})]})}},107:(e,t,r)=>{"use strict";r.d(t,{gS:()=>c});var s=r(10326),a=r(17577);function n({searchTerm:e,onSearchChange:t,placeholder:r="Search foods..."}){return(0,s.jsxs)("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-brand-dark/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:r,className:"w-full pl-10 pr-4 py-3 border border-brand-gold/20 rounded-xl bg-brand-white/90 backdrop-blur-sm   focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent   font-prompt text-brand-dark placeholder-brand-dark/40   transition-all duration-200"})]})}function d({categories:e,selectedCategory:t,onCategorySelect:r}){let a=[...e].sort((e,t)=>e.order-t.order);return s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>r(void 0),className:`px-4 py-2 rounded-lg font-prompt font-medium transition-all duration-200 text-sm
            ${t?"bg-brand-white/70 text-brand-dark hover:bg-brand-white border border-brand-gold/20":"bg-brand-gold text-brand-white shadow-md"}`,children:"All Categories"}),a.map(e=>s.jsx("button",{onClick:()=>r(e.id),className:`px-4 py-2 rounded-lg font-prompt font-medium transition-all duration-200 text-sm
              ${t===e.id?"bg-brand-gold text-brand-white shadow-md":"bg-brand-white/70 text-brand-dark hover:bg-brand-white border border-brand-gold/20"}`,children:e.title},e.id))]})})}let i={approved:{bg:"bg-green-500",border:"border-green-500",text:"text-green-700",label:"Approved"},neutral:{bg:"bg-yellow-500",border:"border-yellow-500",text:"text-yellow-700",label:"Neutral"},avoid:{bg:"bg-red-500",border:"border-red-500",text:"text-red-700",label:"Avoid"},none:{bg:"bg-gray-200",border:"border-gray-300",text:"text-gray-500",label:"Not Set"}};function o({food:e,onStatusChange:t}){let r=e.status,a=i[r],n=r=>{t(e.id,r)};return(0,s.jsxs)("div",{className:"bg-brand-white/90 backdrop-blur-sm rounded-xl border border-brand-gold/20 p-4    hover:shadow-md transition-all duration-200 group",children:[(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-prompt font-semibold text-brand-dark text-lg leading-tight",children:e.name}),e.nutritionalHighlights&&e.nutritionalHighlights.length>0&&s.jsx("p",{className:"text-sm text-brand-dark/60 font-prompt mt-1",children:e.nutritionalHighlights.join(", ")})]}),s.jsx("div",{className:"mb-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${a.bg}`}),s.jsx("span",{className:`text-sm font-prompt font-medium ${a.text}`,children:a.label})]})}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["approved","neutral","avoid"].map(e=>{let t=i[e],a=r===e;return s.jsx("button",{onClick:()=>n(e),className:`p-2 rounded-lg text-xs font-prompt font-medium transition-all duration-200
                ${a?`${t.bg} text-white shadow-sm`:`bg-gray-100 ${t.text} hover:bg-gray-200 border ${t.border}/30`}`,children:t.label},e)})})]})}function l({category:e,foods:t,onStatusChange:r}){return 0===t.length?null:(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-2 h-8 bg-brand-gold rounded-full"}),s.jsx("h2",{className:"font-prompt font-bold text-2xl text-brand-dark",children:e.title}),(0,s.jsxs)("span",{className:"bg-brand-gold/20 text-brand-dark font-prompt font-medium text-sm px-3 py-1 rounded-full",children:[t.length," items"]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(e=>s.jsx(o,{food:e,onStatusChange:r},e.id))})]})}function c({foods:e,categories:t,onStatusChange:r}){let[i,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(),x=(0,a.useMemo)(()=>{let t=e;if(i.trim()){let e=i.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.nutritionalHighlights&&t.nutritionalHighlights.some(t=>t.toLowerCase().includes(e)))}return c&&(t=t.filter(e=>e.categoryId===c)),t},[e,i,c]),p=(0,a.useMemo)(()=>{let e=new Map;return t.forEach(t=>{e.set(t.id,[])}),x.forEach(t=>{let r=e.get(t.categoryId)||[];r.push(t),e.set(t.categoryId,r)}),e},[x,t]),m=(0,a.useMemo)(()=>[...t].sort((e,t)=>e.order-t.order),[t]);return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"font-prompt font-bold text-3xl text-brand-dark mb-2",children:"Food Selection Guide"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt",children:"Choose foods and set their status for your client's nutrition plan"})]}),s.jsx(n,{searchTerm:i,onSearchChange:o,placeholder:"Search foods by name or nutritional highlights..."}),s.jsx(d,{categories:t,selectedCategory:c,onCategorySelect:u}),s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-brand-dark/60 font-prompt",children:[(0,s.jsxs)("span",{children:["Showing ",x.length," foods"]}),i&&(0,s.jsxs)("span",{children:['• Search: "',i,'"']}),c&&(0,s.jsxs)("span",{children:["• Category: ",t.find(e=>e.id===c)?.title]})]})}),s.jsx("div",{className:"space-y-8",children:m.map(e=>{let t=p.get(e.id)||[];return s.jsx(l,{category:e,foods:t,onStatusChange:r},e.id)})}),0===x.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-brand-gold/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-brand-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("h3",{className:"font-prompt font-bold text-xl text-brand-dark mb-2",children:"No foods found"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt mb-4",children:"Try adjusting your search terms or category filter."}),(i||c)&&s.jsx("button",{onClick:()=>{o(""),u(void 0)},className:"bg-brand-gold text-brand-white px-6 py-2 rounded-lg font-prompt font-medium   hover:bg-brand-gold/90 transition-colors duration-200",children:"Clear Filters"})]})]})}},7857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>d,__esModule:()=>n,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\plans\[id]\edit\page.tsx`),{__esModule:n,$$typeof:d}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\plans\[id]\edit\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,53,48,120,370],()=>r(94515));module.exports=s})();