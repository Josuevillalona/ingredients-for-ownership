(()=>{var e={};e.id=288,e.ids=[288],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},57597:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),t(75944),t(22834),t(32325),t(35866);var s=t(23191),a=t(88716),n=t(37922),o=t.n(n),d=t(95231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(r,i);let l=["",{children:["dashboard",{children:["plans",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,75944)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\plans\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22834)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32325)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\dashboard\\plans\\create\\page.tsx"],u="/dashboard/plans/create/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/plans/create/page",pathname:"/dashboard/plans/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},40710:(e,r,t)=>{Promise.resolve().then(t.bind(t,39765))},39765:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(10326),a=t(17577),n=t(35047),o=t(56608),d=t(38165),i=t(99837),l=t(90434);t(76025),t(76);var c=t(81370),u=t(107);function x(){return s.jsx(o.i,{children:s.jsx(m,{})})}function m(){let{user:e}=(0,d.a)(),r=(0,n.useRouter)(),[t,o]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[p,h]=(0,a.useState)(new Map),[b,g]=(0,a.useState)(""),[f,j]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),w=new c.H,y=async()=>{if(!e||!b){alert("Please enter a client name before saving.");return}let t=x.filter(e=>{let r=p.get(e.id);return r&&"none"!==r});if(0===t.length){alert("Please select at least one food before saving.");return}N(!0);try{let s=t.map(e=>{let r=p.get(e.id)||"none",t=null;return"approved"===r?t="blue":"neutral"===r?t="yellow":"avoid"===r&&(t="red"),{foodId:e.id,categoryId:e.categoryId||"",colorCode:t,isSelected:!0,notes:`Coach marked as: ${r}`}});console.log("Creating document with data:",{clientName:b,ingredients:s,status:"published",userUid:e.uid});let a=await w.createDocument(e.uid,{clientName:b,ingredients:s,status:"published"});if(console.log("Document created successfully:",a),a&&a.id)console.log("Navigating to document view:",a.id),r.push(`/dashboard/plans/${a.id}`);else throw Error("Document was created but has no ID")}catch(r){console.error("Error saving document:",r);let e="Failed to save document. Please try again.";r instanceof Error&&(e=`Save failed: ${r.message}`,console.error("Full error details:",{name:r.name,message:r.message,stack:r.stack})),alert(e)}finally{N(!1)}};if(f)return s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-brand-gold rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",children:s.jsx("span",{className:"text-brand-white font-prompt font-bold text-2xl",children:"I"})}),s.jsx("p",{className:"text-brand-dark/60 font-prompt",children:"Loading food database..."})]})});let k=(()=>{let e={approved:0,neutral:0,avoid:0,none:0};return Array.from(p.values()).forEach(r=>{e[r]++}),e})();return(0,s.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[s.jsx("header",{className:"bg-brand-dark shadow-lg border-b border-brand-gold/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx(l.default,{href:"/dashboard",className:"text-brand-white/70 hover:text-brand-white",children:"← Back to Dashboard"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-brand-gold rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-brand-white font-prompt font-bold text-lg",children:"I"})}),s.jsx("h1",{className:"text-brand-white font-prompt font-bold text-2xl",children:"Create Nutrition Plan"})]})]})})}),s.jsx("div",{className:"bg-brand-white border-b border-brand-gold/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{className:"block text-sm font-medium text-brand-dark mb-2 font-prompt",children:"Client Name"}),s.jsx("input",{type:"text",value:b,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 border border-brand-gold/20 rounded-xl bg-brand-white   focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent   font-prompt text-brand-dark placeholder-brand-dark/40",placeholder:"Enter client's name"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-sm font-prompt",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Approved: ",k.approved]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Neutral: ",k.neutral]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-brand-dark",children:["Avoid: ",k.avoid]})]})]}),s.jsx(i.z,{variant:"primary",onClick:y,isLoading:v,disabled:!b||k.approved+k.neutral+k.avoid===0,children:v?"Saving...":"Save Plan"})]})})}),s.jsx(u.gS,{foods:x.map(e=>({id:e.id,name:e.name,status:p.get(e.id)||"none",categoryId:e.categoryId,nutritionalHighlights:e.nutritionalHighlights})),categories:t.map(e=>({id:e.id,title:e.name,order:e.order})),onStatusChange:(e,r)=>{h(t=>{let s=new Map(t);return s.set(e,r),s})}})]})}},107:(e,r,t)=>{"use strict";t.d(r,{gS:()=>c});var s=t(10326),a=t(17577);function n({searchTerm:e,onSearchChange:r,placeholder:t="Search foods..."}){return(0,s.jsxs)("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-brand-dark/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:t,className:"w-full pl-10 pr-4 py-3 border border-brand-gold/20 rounded-xl bg-brand-white/90 backdrop-blur-sm   focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent   font-prompt text-brand-dark placeholder-brand-dark/40   transition-all duration-200"})]})}function o({categories:e,selectedCategory:r,onCategorySelect:t}){let a=[...e].sort((e,r)=>e.order-r.order);return s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>t(void 0),className:`px-4 py-2 rounded-lg font-prompt font-medium transition-all duration-200 text-sm
            ${r?"bg-brand-white/70 text-brand-dark hover:bg-brand-white border border-brand-gold/20":"bg-brand-gold text-brand-white shadow-md"}`,children:"All Categories"}),a.map(e=>s.jsx("button",{onClick:()=>t(e.id),className:`px-4 py-2 rounded-lg font-prompt font-medium transition-all duration-200 text-sm
              ${r===e.id?"bg-brand-gold text-brand-white shadow-md":"bg-brand-white/70 text-brand-dark hover:bg-brand-white border border-brand-gold/20"}`,children:e.title},e.id))]})})}let d={approved:{bg:"bg-green-500",border:"border-green-500",text:"text-green-700",label:"Approved"},neutral:{bg:"bg-yellow-500",border:"border-yellow-500",text:"text-yellow-700",label:"Neutral"},avoid:{bg:"bg-red-500",border:"border-red-500",text:"text-red-700",label:"Avoid"},none:{bg:"bg-gray-200",border:"border-gray-300",text:"text-gray-500",label:"Not Set"}};function i({food:e,onStatusChange:r}){let t=e.status,a=d[t],n=t=>{r(e.id,t)};return(0,s.jsxs)("div",{className:"bg-brand-white/90 backdrop-blur-sm rounded-xl border border-brand-gold/20 p-4    hover:shadow-md transition-all duration-200 group",children:[(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-prompt font-semibold text-brand-dark text-lg leading-tight",children:e.name}),e.nutritionalHighlights&&e.nutritionalHighlights.length>0&&s.jsx("p",{className:"text-sm text-brand-dark/60 font-prompt mt-1",children:e.nutritionalHighlights.join(", ")})]}),s.jsx("div",{className:"mb-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${a.bg}`}),s.jsx("span",{className:`text-sm font-prompt font-medium ${a.text}`,children:a.label})]})}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["approved","neutral","avoid"].map(e=>{let r=d[e],a=t===e;return s.jsx("button",{onClick:()=>n(e),className:`p-2 rounded-lg text-xs font-prompt font-medium transition-all duration-200
                ${a?`${r.bg} text-white shadow-sm`:`bg-gray-100 ${r.text} hover:bg-gray-200 border ${r.border}/30`}`,children:r.label},e)})})]})}function l({category:e,foods:r,onStatusChange:t}){return 0===r.length?null:(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-2 h-8 bg-brand-gold rounded-full"}),s.jsx("h2",{className:"font-prompt font-bold text-2xl text-brand-dark",children:e.title}),(0,s.jsxs)("span",{className:"bg-brand-gold/20 text-brand-dark font-prompt font-medium text-sm px-3 py-1 rounded-full",children:[r.length," items"]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(e=>s.jsx(i,{food:e,onStatusChange:t},e.id))})]})}function c({foods:e,categories:r,onStatusChange:t}){let[d,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(),x=(0,a.useMemo)(()=>{let r=e;if(d.trim()){let e=d.toLowerCase();r=r.filter(r=>r.name.toLowerCase().includes(e)||r.nutritionalHighlights&&r.nutritionalHighlights.some(r=>r.toLowerCase().includes(e)))}return c&&(r=r.filter(e=>e.categoryId===c)),r},[e,d,c]),m=(0,a.useMemo)(()=>{let e=new Map;return r.forEach(r=>{e.set(r.id,[])}),x.forEach(r=>{let t=e.get(r.categoryId)||[];t.push(r),e.set(r.categoryId,t)}),e},[x,r]),p=(0,a.useMemo)(()=>[...r].sort((e,r)=>e.order-r.order),[r]);return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"font-prompt font-bold text-3xl text-brand-dark mb-2",children:"Food Selection Guide"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt",children:"Choose foods and set their status for your client's nutrition plan"})]}),s.jsx(n,{searchTerm:d,onSearchChange:i,placeholder:"Search foods by name or nutritional highlights..."}),s.jsx(o,{categories:r,selectedCategory:c,onCategorySelect:u}),s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-brand-dark/60 font-prompt",children:[(0,s.jsxs)("span",{children:["Showing ",x.length," foods"]}),d&&(0,s.jsxs)("span",{children:['• Search: "',d,'"']}),c&&(0,s.jsxs)("span",{children:["• Category: ",r.find(e=>e.id===c)?.title]})]})}),s.jsx("div",{className:"space-y-8",children:p.map(e=>{let r=m.get(e.id)||[];return s.jsx(l,{category:e,foods:r,onStatusChange:t},e.id)})}),0===x.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-brand-gold/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-brand-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("h3",{className:"font-prompt font-bold text-xl text-brand-dark mb-2",children:"No foods found"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt mb-4",children:"Try adjusting your search terms or category filter."}),(d||c)&&s.jsx("button",{onClick:()=>{i(""),u(void 0)},className:"bg-brand-gold text-brand-white px-6 py-2 rounded-lg font-prompt font-medium   hover:bg-brand-gold/90 transition-colors duration-200",children:"Clear Filters"})]})]})}},75944:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>n,default:()=>d});var s=t(68570);let a=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\plans\create\page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let d=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\dashboard\plans\create\page.tsx#default`)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,53,48,120,370],()=>t(57597));module.exports=s})();