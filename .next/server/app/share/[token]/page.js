(()=>{var e={};e.id=459,e.ids=[459],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},68437:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l}),t(8605),t(32325),t(35866);var s=t(23191),n=t(88716),a=t(37922),o=t.n(a),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l=["",{children:["share",{children:["[token]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8605)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\share\\[token]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32325)),"C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josue\\Documents\\Builds\\ingredients-for-ownership\\src\\app\\share\\[token]\\page.tsx"],u="/share/[token]/page",h={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/share/[token]/page",pathname:"/share/[token]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},48741:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},9451:(e,r,t)=>{Promise.resolve().then(t.bind(t,68776)),Promise.resolve().then(t.bind(t,28312)),Promise.resolve().then(t.bind(t,38165))},432:(e,r,t)=>{Promise.resolve().then(t.bind(t,39826))},35047:(e,r,t)=>{"use strict";var s=t(77389);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},39826:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(10326),n=t(17577),a=t(35047),o=t(35094);function i(){let{document:e,foods:r,loading:t,error:i,updateTracking:d,trackingLoading:l,progressPercentage:c,progressMetrics:u}=function(e){let[r,t]=(0,n.useState)(null),[s,a]=(0,n.useState)([]),[i,d]=(0,n.useState)(!0),[l,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(new Set),x=async()=>{try{d(!0),c(null);let r=await fetch(`/api/share/${e}`),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to load document");t(s.document);let n=await fetch("/api/foods");if(n.ok){let e=await n.json();a(e.foods||[])}}catch(e){console.error("Error loading shared document:",e),c(e instanceof Error?e.message:"Failed to load your nutrition plan")}finally{d(!1)}},m=async(s,n)=>{if(r){h(e=>new Set(e).add(s));try{let r=await fetch(`/api/share/${e}/tracking`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:s,clientChecked:n})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update tracking")}t(e=>{if(!e)return e;let r=e.ingredients.map(e=>e.foodId===s?{...e,clientChecked:n}:e);return{...e,ingredients:r}})}catch(e){throw console.error("Error updating tracking:",e),e}finally{h(e=>{let r=new Set(e);return r.delete(s),r})}}};return{document:r,foods:s,loading:i,error:l,updateTracking:m,trackingLoading:u,progressPercentage:r?(0,o.zB)(r.ingredients).percentage:0,progressMetrics:r?(0,o.zB)(r.ingredients):null,refetch:x}}((0,a.useParams)().token),h=e=>r.find(r=>r.id===e)||null,x=e=>{switch(e){case"blue":return"bg-blue-100 text-blue-800 border-blue-200";case"yellow":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"red":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=e=>{switch(e){case"blue":return"Unlimited";case"yellow":return"Moderate";case"red":return"Limited";default:return"Not specified"}},p=async(e,r)=>{try{await d(e,r)}catch(e){alert("Failed to update tracking. Please try again.")}};return t?s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-brand-white rounded-xl p-12 shadow-sm border border-brand-gold/20 text-center max-w-md",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-brand-gold border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{className:"text-brand-dark/60 font-prompt",children:"Loading your nutrition plan..."})]})}):i||!e?s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-brand-white rounded-xl p-12 shadow-sm border border-red-200 text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full mx-auto mb-6 flex items-center justify-center",children:s.jsx("span",{className:"text-red-600 text-2xl",children:"âš ï¸"})}),s.jsx("h1",{className:"font-prompt font-bold text-xl text-brand-dark mb-4",children:"Plan Not Available"}),s.jsx("p",{className:"text-brand-dark/60 mb-6",children:i||"This nutrition plan is no longer available or the link has expired."}),s.jsx("p",{className:"text-sm text-brand-dark/50",children:"Please contact your coach for a new link."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-brand-cream",children:[s.jsx("header",{className:"bg-brand-dark text-brand-white",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h1",{className:"font-prompt font-bold text-2xl mb-2",children:["Nutrition Plan for ",e.clientName]}),s.jsx("p",{className:"text-brand-white/80 text-sm",children:"Your personalized ingredient recommendations"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"font-prompt font-bold text-lg text-brand-dark",children:"Nutrition Goals Progress"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-brand-gold",children:[c,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:s.jsx("div",{className:"bg-brand-gold h-3 rounded-full transition-all duration-300",style:{width:`${c}%`}})}),s.jsx("p",{className:"text-sm text-brand-dark/60",children:u?(0,o.tN)(u):"Loading progress..."}),u&&u.breakdown.red.total>0&&(0,s.jsxs)("p",{className:"text-xs text-brand-dark/50 mt-2",children:[u.breakdown.red.total," awareness-only item(s) â€¢ ",u.breakdown.red.info]})]})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-4 pb-8",children:[s.jsx("div",{className:"space-y-4",children:e.ingredients.map(e=>{let r=h(e.foodId),t=l.has(e.foodId);return s.jsx("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 pt-1",children:(0,o.v8)(e.colorCode)?s.jsx("label",{className:"flex items-center cursor-pointer",children:s.jsx("input",{type:"checkbox",checked:e.clientChecked||!1,onChange:r=>p(e.foodId,r.target.checked),disabled:t,className:"w-6 h-6 text-brand-gold border-2 border-gray-300 rounded focus:ring-2 focus:ring-brand-gold focus:border-transparent disabled:opacity-50"})}):s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-red-600 font-medium border border-red-300 rounded px-1.5 py-0.5 bg-red-50",children:"â„¹ï¸"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-prompt font-semibold text-lg text-brand-dark",children:r?.name||e.foodId}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${x(e.colorCode)}`,children:m(e.colorCode)})]}),r&&(0,s.jsxs)("div",{className:"space-y-2",children:[r.nutritionalHighlights&&r.nutritionalHighlights.length>0&&(0,s.jsxs)("p",{className:"text-sm text-brand-dark/70",children:[s.jsx("strong",{children:"Benefits:"})," ",r.nutritionalHighlights.join(", ")]}),r.servingSize&&(0,s.jsxs)("p",{className:"text-sm text-brand-dark/70",children:[s.jsx("strong",{children:"Serving:"})," ",r.servingSize]})]}),e.notes&&s.jsx("div",{className:"mt-3 p-3 bg-brand-cream rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-brand-dark/80",children:[s.jsx("strong",{children:"Coach Note:"})," ",e.notes]})}),s.jsx("div",{className:"mt-3 p-3 rounded-lg",style:{backgroundColor:"blue"===e.colorCode?"#e6f3ff":"yellow"===e.colorCode?"#fff8e6":"red"===e.colorCode?"#ffe6e6":"#f5f5f5"},children:s.jsx("p",{className:"text-sm text-brand-dark/80 italic",children:(0,o.XV)(e.colorCode)})}),t&&(0,s.jsxs)("div",{className:"mt-2 flex items-center text-sm text-brand-dark/60",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border border-brand-gold border-t-transparent rounded-full mr-2"}),"Updating..."]})]})]})},e.foodId)})}),s.jsx("div",{className:"mt-12 text-center",children:(0,s.jsxs)("div",{className:"bg-brand-white rounded-xl p-6 shadow-sm border border-brand-gold/20",children:[s.jsx("p",{className:"text-sm text-brand-dark/60 mb-2",children:"Questions about your plan? Contact your coach."}),(0,s.jsxs)("p",{className:"text-xs text-brand-dark/50",children:["Last updated: ",new Date(1e3*e.updatedAt.seconds).toLocaleDateString()]})]})})]})]})}},68776:(e,r,t)=>{"use strict";t.d(r,{ErrorBoundary:()=>o});var s=t(10326),n=t(17577),a=t.n(n);class o extends a().Component{constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return s.jsx(e,{error:this.state.error,resetError:this.resetError})}return s.jsx("div",{className:"min-h-screen bg-brand-cream flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"bg-brand-white rounded-xl p-8 shadow-sm border border-brand-gold/20 text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:s.jsx("span",{className:"text-red-600 text-2xl",children:"âš ï¸"})}),s.jsx("h2",{className:"font-prompt font-bold text-xl text-brand-dark mb-4",children:"Something went wrong"}),s.jsx("p",{className:"text-brand-dark/60 mb-6",children:"We encountered an unexpected error. Please try refreshing the page."}),s.jsx("button",{onClick:this.resetError,className:"bg-brand-gold text-brand-white px-6 py-2 rounded-lg font-prompt font-medium hover:bg-brand-hover transition-colors",children:"Try Again"})]})})}return this.props.children}}},28312:(e,r,t)=>{"use strict";t.d(r,{NetworkStatusIndicator:()=>a});var s=t(10326),n=t(17577);function a(){let{isOnline:e,wasOffline:r}=function(){let[e,r]=(0,n.useState)(!0),[t,s]=(0,n.useState)(!1);return{isOnline:e,wasOffline:t}}();return e&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 px-4 py-2 text-center text-sm font-prompt transition-colors ${e?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:e?"âœ… Back online - data will sync":"âš ï¸ No internet connection - working offline"})}},38165:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>h,a:()=>u});var s=t(10326),n=t(17577),a=t(46791),o=t(76),i=t(76025);class d{async signIn(e,r){try{return(await (0,a.e5)(i.I,e,r)).user}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async createCoach(e,r,t){try{let s=await (0,a.Xb)(i.I,e,r),n={email:e,name:t,createdAt:o.EK.now(),preferences:{colorCodingStyle:"standard"}};await (0,o.pl)((0,o.JU)(i.db,"coaches",s.user.uid),n)}catch(e){throw Error(this.getAuthErrorMessage(e.code))}}async signOut(){try{await (0,a.w7)(i.I)}catch(e){throw Error("Failed to sign out. Please try again.")}}async getCoachProfile(e){try{let r=(0,o.JU)(i.db,"coaches",e),t=await (0,o.QT)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){return console.error("Error fetching coach profile:",e),null}}onAuthStateChange(e){return(0,a.Aj)(i.I,e)}getCurrentUser(){return i.I.currentUser}getAuthErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred during authentication. Please try again."}}}let l=new d,c=(0,n.createContext)(void 0);function u(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h({children:e}){let[r,t]=(0,n.useState)(null),[a,o]=(0,n.useState)(null),[i,d]=(0,n.useState)(!0),u=async(e,r)=>{d(!0);try{await l.signIn(e,r)}catch(e){throw d(!1),e}},h=async(e,r,t)=>{d(!0);try{await l.createCoach(e,r,t),await l.signIn(e,r)}catch(e){throw d(!1),e}},x=async()=>{d(!0);try{await l.signOut()}catch(e){throw d(!1),e}},m=async()=>{if(r)try{let e=await l.getCoachProfile(r.uid);o(e)}catch(e){console.error("Error refreshing coach profile:",e)}};return s.jsx(c.Provider,{value:{user:r,coach:a,loading:i,signIn:u,signUp:h,signOut:x,refreshCoachProfile:m},children:e})}},76025:(e,r,t)=>{"use strict";t.d(r,{I:()=>d,db:()=>i});var s=t(42585),n=t(76),a=t(46791);let o=(0,s.ZF)({apiKey:"AIzaSyBQZagyMTpFNsoSOh4cKT8PVV_xbCuiX8s",authDomain:"ingredients-for-ownershi-81eaf.firebaseapp.com",projectId:"ingredients-for-ownershi-81eaf",storageBucket:"ingredients-for-ownershi-81eaf.firebasestorage.app",messagingSenderId:"855662446831",appId:"1:855662446831:web:deff590004f93f5cec731a"}),i=(0,n.ad)(o),d=(0,a.v0)(o)},35094:(e,r,t)=>{"use strict";function s(e){return"blue"===e||"yellow"===e}function n(e){let r={blue:{total:0,completed:0},yellow:{total:0,completed:0},red:{total:0,info:"For awareness only - enjoy occasionally"}};e.forEach(e=>{let{colorCode:t,clientChecked:s}=e;if(!t){console.warn("Ingredient missing color code:",e.foodId);return}switch(t){case"blue":r.blue.total++,s&&r.blue.completed++;break;case"yellow":r.yellow.total++,s&&r.yellow.completed++;break;case"red":r.red.total++;break;default:console.warn(`Unknown color code: ${t}`)}});let t=r.blue.total+r.yellow.total,s=r.blue.completed+r.yellow.completed;return{trackableCount:t,completedCount:s,percentage:t>0?Math.round(s/t*100):0,breakdown:r}}function a(e){let{completedCount:r,trackableCount:t,percentage:s}=e;return 0===t?"No nutrition goals set yet":0===r?`0 of ${t} nutrition goals started`:100===s?`All ${t} nutrition goals completed! ðŸŽ‰`:`${r} of ${t} nutrition goals completed (${s}%)`}function o(e){switch(e){case"blue":return"Great choice! Add this to your regular rotation.";case"yellow":return"Perfect for balanced nutrition in proper portions.";case"red":return"Enjoy occasionally and in moderation. No tracking needed.";default:return"Follow your coach's guidance for this ingredient."}}t.d(r,{XV:()=>o,tN:()=>a,v8:()=>s,zB:()=>n})},32325:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w,metadata:()=>f,viewport:()=>b});var s=t(19510),n=t(68570);let a=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\providers\AuthProvider.tsx`),{__esModule:o,$$typeof:i}=a;a.default,(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\providers\AuthProvider.tsx#useAuth`);let d=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\providers\AuthProvider.tsx#AuthProvider`),l=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\ErrorBoundary.tsx`),{__esModule:c,$$typeof:u}=l;l.default;let h=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\ErrorBoundary.tsx#ErrorBoundary`),x=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\NetworkStatus.tsx`),{__esModule:m,$$typeof:p}=x;x.default,(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\NetworkStatus.tsx#useNetworkStatus`);let g=(0,n.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\components\NetworkStatus.tsx#NetworkStatusIndicator`);t(5023);let f={title:"Ingredients for Ownership - Health Coaching Platform",description:"AI-assisted nutritional plan creation for health coaches",manifest:"/manifest.json"},b={width:"device-width",initialScale:1,maximumScale:1,themeColor:"#BD9A60"};function w({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"})]}),s.jsx("body",{className:"font-prompt antialiased",suppressHydrationWarning:!0,children:s.jsx(d,{children:(0,s.jsxs)(h,{children:[s.jsx(g,{}),e]})})})]})}},8605:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});var s=t(68570);let n=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\share\[token]\page.tsx`),{__esModule:a,$$typeof:o}=n;n.default;let i=(0,s.createProxy)(String.raw`C:\Users\josue\Documents\Builds\ingredients-for-ownership\src\app\share\[token]\page.tsx#default`)},5023:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,53],()=>t(68437));module.exports=s})();